cjModules.define(function(){"use strict";return function(e){function t(){var t=bmElements.createElement("fulldialog",{serviceLogo:{label:cjExtensions.i18n("cj_i18n_00081","Reminders")},iconName:"reminders",message:cjExtensions.i18n("cj_i18n_00212","To use Reminders, you need to give access to load your Google Reminders data"),actionLabel:cjExtensions.i18n("cj_i18n_00224","Give permission"),action:function(){g.auth.requestPermission(u)}});e.appendChild(t)}function a(){return g.request({internal:!0,type:"POST",dataType:"JSON",scope:u,requestHeaders:{"Content-Type":"application/json"},data:JSON.stringify({includeDeleted:!1,includeArchived:!1}),url:"https://www.googleapis.com/reminders/v1internal/reminders/list?fields=*"}).then(function(e){return e.task.sort(function(e,t){return e.hasOwnProperty("dueDate")||t.hasOwnProperty("dueDate")?e.hasOwnProperty("dueDate")?t.hasOwnProperty("dueDate")?e.dueDate.unspecifiedFutureTime===!0&&t.dueDate.unspecifiedFutureTime===!0?e.title>t.title?1:-1:e.dueDate.unspecifiedFutureTime===!0?1:t.dueDate.unspecifiedFutureTime===!0?-1:e.dueDate.year!==t.dueDate.year?e.dueDate.year>t.dueDate.year?1:-1:e.dueDate.month!==t.dueDate.month?e.dueDate.month>t.dueDate.month?1:-1:e.dueDate.day!==t.dueDate.day?e.dueDate.day>t.dueDate.day?1:-1:e.dueDate.allDay&&t.dueDate.allDay?e.title>t.title?1:-1:e.dueDate.allDay?-1:t.dueDate.allDay?1:e.dueDate.time.hour!==t.dueDate.time.hour?e.dueDate.time.hour>t.dueDate.time.hour?1:-1:e.dueDate.time.minute!==t.dueDate.time.minute?e.dueDate.time.minute>t.dueDate.time.minute?1:-1:e.dueDate.time.second!==t.dueDate.time.second?e.dueDate.time.second>t.dueDate.time.second?1:-1:e.title>t.title?1:-1:-1:1:e.title>t.title?1:-1})},t)}function n(e){var t=e.extensions&&e.extensions.keepExtension&&e.extensions.keepExtension.clientNoteId;if(t)return{label:cjExtensions.i18n("cj_i18n_00215","View note"),onClick:function(){var e="https://keep.google.com/u/"+g.account.authuser+"/#NOTE/"+t;bmBasics.openTab(e)}};var a=e.assistance&&e.assistance.taskAssistance&&e.assistance.taskAssistance.assistance&&e.assistance.taskAssistance.assistance[0];if(!a)return null;if(a.callAction){var n=a.callAction.phoneNumber;if(!n)return null;var i=n[0]&&n[0].phoneNumber;return i?{label:cjExtensions.i18n("cj_i18n_00213","Call"),onClick:function(){var e=cjBasics.urls.create("https://hangouts.google.com/",{authuser:g.account.authuser,action:"chat",pn:i});bmBasics.openTab(e)}}:null}if(a.emailAction){var s=a.emailAction.emailAddress&&a.emailAction.emailAddress[0]&&a.emailAction.emailAddress[0].emailAddress;return{label:cjExtensions.i18n("cj_i18n_00214","Email"),onClick:function(){bmBasics.openTab("mailto:"+s)}}}return null}function i(e){var t=cjMaterial.createElement("card",{withPadding:!0}),a=cjMaterial.createElement("title",{label:e.title});if(t.appendChild(a),e.dueDate){var i=document.createElement("div");i.className="cj-md-secondarytext",i.textContent=bmBasics.dateTime.display.dateTime(e.dueDate),t.appendChild(i)}var s=n(e);if(s){var o=cjMaterial.createElement("button",{color:"#4285f4",label:s.label,onClick:s.onClick});t.appendChild(o)}return t}function s(){r.textContent="",a().then(function(e){e.forEach(function(e){var t=i(e);r.appendChild(t)}),bmBasics.toggleLoading("off",r)},function(){bmBasics.toggleLoading("off",r)}),bmBasics.toggleLoading("on",r)}function o(){var t=bmElements.createElement("pageheader",{color:"#4285f4",pageId:"reminders",pageTitle:cjExtensions.i18n("cj_i18n_00081","Reminders")});r=cjMaterial.createElement("container",{scrollable:!0,shadow:!0,darker:!0}),s();var a=document.createDocumentFragment();a.appendChild(t),a.appendChild(r),e.appendChild(a)}var r,u=["https://www.googleapis.com/auth/taskassist.readonly","https://www.googleapis.com/auth/reminders"];o()}});