cjModules.define(function(){"use strict";return function(e){function t(t){e.textContent="";var n=bmElements.createElement("fulldialog",{serviceLogo:{label:cjExtensions.i18n("cj_i18n_00179","AdSense")},iconName:"adsense",message:t.message,actionLabel:t.actionLabel,action:t.action});e.appendChild(n)}function n(){if(!l){l=!0,e.textContent="";var t=bmElements.createElement("fulldialog",{serviceLogo:{label:cjExtensions.i18n("cj_i18n_00179","AdSense")},iconName:"adsense",message:cjExtensions.i18n("cj_i18n_00233","There is no AdSense account attached to this Google account"),actionLabel:cjExtensions.i18n("cj_i18n_00234","Change account"),action:function(){bmRuntime.changeToPage("account")}});e.appendChild(t)}}function a(e){e&&e.body&&e.body.indexOf("noAdsenseAccount")&&n(),e&&"notAuthorized"===e.error&&t({message:cjExtensions.i18n("cj_i18n_00235","Before you can use this page, you need to give access to load your Google AdSense data"),actionLabel:cjExtensions.i18n("cj_i18n_00224","Give permission"),action:e.authorize})}function o(e){var t=cjBasics.urls.create(u+"reports",{startDate:e.start,endDate:e.end,metric:"EARNINGS",useTimezoneReporting:!0,fields:"headers/currency,totals"});return g.request({internal:!0,scope:m,url:t,dataType:"JSON"}).then(function(e){return{revenue:e.totals[0]||0,currency:e.headers[0].currency}},a)}function i(e){return e>0?"up":0>e?"down":"neutral"}function s(e){var t=cjMaterial.createElement("card",{withPadding:!0});t.classList.add("adsense-card"),t.addEventListener("click",function(){bmBasics.openTab("https://www.google.com/adsense/app#viewreports/d="+e.reportName)});var n=document.createElement("div");n.className="date-container",n.textContent=e.title,t.appendChild(n);var a=document.createElement("div");a.className="amount",a.textContent="‚Å£",t.appendChild(a);var s;if(e.previous){var r=document.createElement("div");r.className="cj-md-secondarytext in-comparison",r.textContent=e.previous.title,n.appendChild(r),s=document.createElement("div"),s.className="change",t.appendChild(s)}return o({start:e.start,end:e.end}).then(function(t){var n=t.revenue,r=t.currency;a.textContent=n+" "+r,e.previous&&o({start:e.previous.start,end:e.previous.end}).then(function(e){var t=e.revenue,a=e.currency;if(r===a){var o=n-t,c=i(o),d=cjMaterial.createElement("icon",{name:"down"===c?"__mdi:trending_down":"__mdi:trending_up"});s.appendChild(d),s.classList.add(c);var l=Math.round(1e4*Math.abs(o))/1e4+" "+r+" ("+Math.round(1e3*(n/t-1))/10+"%)",m=document.createTextNode(l);s.appendChild(m)}})}),t}function r(){p.forEach(function(e){var t=s(e);d.appendChild(t)}),bmBasics.toggleLoading("off",e)}function c(){bmBasics.toggleLoading("on",e);var t=document.createDocumentFragment(),n=bmElements.createElement("pageheader",{color:"#4285f4",pageId:"adsense",pageTitle:cjExtensions.i18n("cj_i18n_00236","Estimated earnings")});t.appendChild(n),d=cjMaterial.createElement("container",{scrollable:!0,shadow:!0,darker:!0}),t.appendChild(d),e.appendChild(t),r()}var d,l,m=["https://www.googleapis.com/auth/adsense.readonly"],u="https://www.googleapis.com/adsense/v1.4/",p=[{title:cjExtensions.i18n("cj_i18n_00225","Today so far"),start:"today",end:"today",reportName:"today"},{title:cjExtensions.i18n("cj_i18n_00226","Yesterday"),start:"today-1d",end:"today-1d",reportName:"yesterday",previous:{title:cjExtensions.i18n("cj_i18n_00227","vs same day last week"),start:"today-8d",end:"today-8d"}},{title:cjExtensions.i18n("cj_i18n_00228","This month so far"),start:"startOfMonth",end:"today",reportName:"thismonth",previous:{title:cjExtensions.i18n("cj_i18n_00229","vs same day last month"),start:"startOfMonth-1m",end:"today-1m"}},{title:cjExtensions.i18n("cj_i18n_00230","Last month"),start:"startOfMonth-1m",end:"startOfMonth-1d",reportName:"lastmonth",previous:{title:cjExtensions.i18n("cj_i18n_00231","vs month before"),start:"startOfMonth-2m",end:"startOfMonth-1m-1d"}},{title:cjExtensions.i18n("cj_i18n_00232","Lifetime"),start:"today-100y",end:"today",reportName:"alltime"}];c()}});