cjModules.define(function(){"use strict";return function(e,t){function n(){E.textContent="";var e=u.value;if(v=e,e.length>0){var t=M.explore.type.selected;("string"!=typeof t||"google"===t)&&(t=null);var n=M.explore.edition?M.explore.edition.selected:"worldwide";("string"!=typeof n||"worldwide"===n)&&(n=null);var a=cjBasics.urls.create("https://trends.google.com/trends/fetchComponent",{hl:g.lang,cid:"TIMESERIES_GRAPH_0","export":"5",w:"394",h:"300",gprop:t,q:e,geo:n}),r=bmElements.createElement("iframe",{src:a});E.appendChild(r)}else{var i=cjMaterial.createElement("emptystate",{color:"#4285f4",iconName:"__mdi:search",subLabel:cjExtensions.i18n("cj_i18n_00046","Please enter a search query").toLowerCase()});E.appendChild(i)}}function a(){var e=cjMaterial.createElement("container"),t=cjMaterial.createElement("appbar",{color:"#4285f4",secondary:!0}),a=cjMaterial.createElement("iconbutton",{iconName:"__mdi:menu",onClick:function(){b.open()}});t.appendChild(a);var r=cjMaterial.createElement("title",{label:M.explore.label});return t.appendChild(r),M.explore.type=cjMaterial.createElement("selectbox",{onChange:n,options:[{selected:!0,value:"google",label:cjExtensions.i18n("cj_i18n_00056","Web Search")},{value:"images",label:cjExtensions.i18n("cj_i18n_00057","Image Search")},{value:"news",label:cjExtensions.i18n("cj_i18n_00058","News Search")},{value:"froogle",label:cjExtensions.i18n("cj_i18n_00059","Google Shopping")},{value:"youtube",label:cjExtensions.i18n("cj_i18n_00060","YouTube Search")}]}),t.appendChild(M.explore.type),Promise.all([cjBasics.ajax({url:"pages/trends/explore-editions.json",dataType:"JSON"}),cjExtensions.settings.get("prefTrendsExploreEdition")]).then(function(e){M.explore.edition=cjMaterial.createElement("selectbox",{onChange:function(){cjExtensions.settings.set("prefTrendsExploreEdition",M.explore.edition.selected),n()},options:e[0]}),M.explore.edition.selected=e[1]||"worldwide",t.appendChild(M.explore.edition)}),e.appendChild(t),E=cjMaterial.createElement("container"),e.appendChild(E),e}function r(){f.textContent="";var e=M.hottrendsDetails.trendId,t=_[e],n=cjMaterial.createElement("card",{withPadding:!0}),a=cjMaterial.createElement("icon",{size:100,url:"https:"+t.imgUrl});a.dataset.imgSource=t.imgSource,a.className="image-container",a.addEventListener("click",function(){bmBasics.openTab(t.imgLinkUrl)}),n.appendChild(a);var r=document.createElement("div");r.className="content-container";var i=cjMaterial.createElement("title",{label:t.title});r.appendChild(i);var l=document.createElement("span");l.className="hotness-level",l.setAttribute("style","background-color: "+t.hotnessColor+"; background-position: "+10*t.hotnessLevel+"px;"),r.appendChild(l);var o=document.createElement("span");if(o.textContent=t.formattedTraffic+" "+cjExtensions.i18n("cj_i18n_00063","searches"),r.appendChild(o),t.relatedSearchesList.length>0){var s=document.createElement("div");s.className="relative-searches",s.textContent=cjExtensions.i18n("cj_i18n_00062","Related Searches")+":",r.appendChild(s);var c=cjMaterial.createElement("secondarytext",{label:t.relatedSearchesList.join(", ")});r.appendChild(c)}n.appendChild(r),f.appendChild(n);var d=cjMaterial.createElement("subheader",{label:cjExtensions.i18n("cj_i18n_00064","News Articles")});f.appendChild(d),t.newsArticlesList.forEach(function(e){var t=cjMaterial.createElement("card",{withPadding:!0});t.addEventListener("click",function(){bmBasics.openTab(e.link)});var n=document.createElement("div");n.className="cj-md-title",n.innerHTML=e.title,t.appendChild(n);var a=document.createElement("div");a.className="cj-md-secondarytext",a.innerHTML=e.source,t.appendChild(a);var r=document.createElement("article");r.innerHTML=e.snippet,t.appendChild(r),f.appendChild(t)})}function i(){x.textContent="",bmBasics.toggleLoading("on",x),cjExtensions.settings.get("prefTrendsHottrendsEdition").then(function(e){return e||"p1"}).then(function(e){C=e,cjBasics.ajax({url:cjBasics.urls.create("https://trends.google.com/trends/hottrends/hotItems",{ajax:"1",pn:M.hottrends.edition?M.hottrends.edition.selected:C,htv:"l",hl:g.lang}),dataType:"JSON"}).then(function(e){var t=0;_={},e.trendsByDateList.forEach(function(e){var n=cjMaterial.createElement("subheader",{label:e.formattedDate});x.appendChild(n);var a=cjMaterial.createElement("card");e.trendsList.forEach(function(n){var i=document.createElement("div");i.dataset.id=t,i.addEventListener("click",function(){var e=M.hottrendsDetails.trendId,t=JSON.parse(i.dataset.id);h.selected="hottrendsDetails",e!==t&&(M.hottrendsDetails.trendId=t,r())}),n.date=e.date,_[t]=n,t+=1;var l=document.createElement("span");l.className="hotness-level",l.setAttribute("style","background-color: "+n.hotnessColor+"; background-position: "+10*n.hotnessLevel+"px;"),i.appendChild(l);var o=document.createElement("p");o.textContent=n.title,i.appendChild(o),a.appendChild(i)}),x.appendChild(a)}),bmBasics.toggleLoading("off",x)})})}function l(){var e=cjMaterial.createElement("container",{darker:!0}),t=cjMaterial.createElement("appbar",{color:"#4285f4",secondary:!0}),n=cjMaterial.createElement("iconbutton",{iconName:"__mdi:menu",onClick:function(){b.open()}});t.appendChild(n);var a=cjMaterial.createElement("title",{label:M.hottrends.label});return t.appendChild(a),Promise.all([cjBasics.ajax({url:"pages/trends/hottrends-editions.json",dataType:"JSON"}),cjExtensions.settings.get("prefTrendsHottrendsEdition")]).then(function(e){var n=e[0];C=e[1]||"p1",M.hottrends.edition=cjMaterial.createElement("selectbox",{onChange:function(){cjExtensions.settings.set("prefTrendsHottrendsEdition",M.hottrends.edition.selected),i()},options:n}),M.hottrends.edition.selected=C,t.appendChild(M.hottrends.edition)}),e.appendChild(t),x=cjMaterial.createElement("container",{scrollable:!0,shadow:!0}),bmBasics.toggleLoading("on",x),e.appendChild(x),e}function o(){var e=cjMaterial.createElement("container",{darker:!0}),t=cjMaterial.createElement("appbar",{color:"#4285f4",secondary:!0}),n=cjMaterial.createElement("iconbutton",{iconName:"__mdi:arrow_back",onClick:function(){h.selected="hottrends"}});t.appendChild(n);var a=cjMaterial.createElement("title",{label:M.hottrendsDetails.label});t.appendChild(a);var i,l=cjMaterial.createElement("iconbutton",{iconName:"__mdi:chevron_left",onClick:function(){var e=M.hottrendsDetails.trendId,t=e-1;t in _&&(M.hottrendsDetails.trendId-=1,r()),i.disabled=t===Object.keys(_).length-1,l.disabled=0===t}});return l.disabled=!0,t.appendChild(l),i=cjMaterial.createElement("iconbutton",{iconName:"__mdi:chevron_right",onClick:function(){var e=M.hottrendsDetails.trendId,t=e+1;t in _&&(M.hottrendsDetails.trendId+=1,r()),i.disabled=t===Object.keys(_).length-1,l.disabled=0===t}}),t.appendChild(i),e.appendChild(t),f=cjMaterial.createElement("container",{scrollable:!0,shadow:!0}),e.appendChild(f),e}function s(){var e=cjMaterial.createElement("drawer",{color:"#4285f4"}),t=bmElements.createElement("servicelogo",{label:cjExtensions.i18n("cj_i18n_00441","Trends"),color:"#4285f4"});e.appendChild(t);var a={hottrends:M.hottrends,explore:M.explore,hotvideos:{label:cjExtensions.i18n("cj_i18n_00191","Trending on YouTube"),newTabUrl:"https://trends.google.com/trends/hotvideos",external:!0},topcharts:{label:cjExtensions.i18n("cj_i18n_00192","Top charts"),newTabUrl:"https://trends.google.com/trends/topcharts",external:!0},subscriptions:{label:cjExtensions.i18n("cj_i18n_00193","Subscriptions"),newTabUrl:"https://trends.google.com/trends/subscriptions",external:!0},correlate:{label:cjExtensions.i18n("cj_i18n_00194","Correlate"),newTabUrl:"https://trends.google.com/trends/correlate",external:!0}};return j=bmElements.createElement("drawertabs",{items:a,onChange:function(e){return a[e].external?void bmBasics.openTab(a[e].newTabUrl):("hottrends"===e&&(u.value="",n()),void(h.selected=e))},selected:"hottrends"}),e.appendChild(j),e}function c(e){var t=e;("string"!=typeof t||""===t)&&(t=null);var n=M.explore.type.selected;("string"!=typeof n||"google"===n)&&(n=null);var a=M.explore.edition?M.explore.edition.selected:"worldwide";return("string"!=typeof a||"worldwide"===a)&&(a=null),cjBasics.urls.create("https://trends.google.com/trends/explore",{q:t,geo:a,gprop:n})}function d(e){if("explore"===e)return c(v);if("hottrends"===e)return cjBasics.urls.create("https://trends.google.com/trends/hottrends",{pn:M.hottrends.edition?M.hottrends.edition.selected:C,hl:g.lang});if("hottrendsDetails"===e){var t=_[M.hottrendsDetails.trendId];return cjBasics.urls.create("https://trends.google.com/trends/hottrends",{pn:M.hottrends.edition?M.hottrends.edition.selected:C,hl:g.lang,std:t.date,stt:t.title},"a="+t.date+"-"+t.title.split(" ").join("+"))}return"https://trends.google.com/trends/"}function p(){M={hottrends:{label:cjExtensions.i18n("cj_i18n_00195","Trending searches"),content:l,afterLoad:i,newTabUrl:"https://trends.google.com/trends/hottrends"},hottrendsDetails:{label:cjExtensions.i18n("cj_i18n_00196","Trend details"),content:o},explore:{label:cjExtensions.i18n("cj_i18n_00061","Explore"),content:a,afterLoad:n,newTabUrl:"https://trends.google.com/trends/explore",divider:!0}},h=bmElements.createElement("multiplecontainer",{items:M,selected:"hottrends"}),b=s(),m=bmElements.createElement("pageheader",{color:"#4285f4",pageId:"trends",searchboxProperties:{label:cjExtensions.i18n("cj_i18n_00197","Explore topics"),onSubmit:function(){h.selected="explore",j.selected="explore",n()},onSubmitAlt:function(e){var t=c(e);bmBasics.openTab(t)}}}),u=m.searchbox,t.setOpenInNewHandler(function(){var e=d(h.selected);bmBasics.openTab(e)}),e.appendChild(b),e.appendChild(m),T(u.select),e.appendChild(h)}var h,m,u,b,j,E,x,f,v,C,_,M,T=t.onPageDisplay;p()}});