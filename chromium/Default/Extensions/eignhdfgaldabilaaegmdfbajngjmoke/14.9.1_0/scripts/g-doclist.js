!function(){"use strict";function e(e){var i=e.mimeType;if(i.startsWith("application/vnd.google-apps.")){if("application/vnd.google-apps.folder"===i)return{name:e.shared?"__mdi:folder_shared":"__mdi:folder",color:e.folderColorRgb};if("application/vnd.google-apps.document"===i)return _.document;if("application/vnd.google-apps.spreadsheet"===i)return _.spreadsheet;if("application/vnd.google-apps.presentation"===i)return _.presentation;if("application/vnd.google-apps.form"===i)return _.form;if("application/vnd.google-apps.drawing"===i)return _.drawing;if("application/vnd.google-apps.photo"===i)return _.image;if("application/vnd.google-apps.video"===i)return _.video;if("application/vnd.google-apps.audio"===i)return _.audio;if("application/vnd.google-apps.fusiontable"===i)return _.fusion;if("application/vnd.google-apps.map"===i)return _.map;if("application/vnd.google-apps.script"===i)return _.script;if("application/vnd.google-apps.site"===i||"application/vnd.google-apps.sites"===i)return _.sites;if("application/vnd.google-apps.file"===i||"application/vnd.google-apps.unknown"===i)return _.generic}if("application/vnd.google-analytics.rap.report"===i)return _.datareport;if("application/vnd.ms-excel"===i||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===i)return _.excel;if("application/msword"===i||"vnd.openxmlformats-officedocument.wordprocessingml.document"===i)return _.word;if("application/vnd.ms-powerpoint"===i||"application/vnd.openxmlformats-officedocument.presentationml.presentation"===i)return _.powerpoint;if("application/pdf"===i)return _.pdf;if("application/zip"===i)return _.archive;if("application/octet-stream"===i)return _.generic;if(i.startsWith("image/"))return _.image;if(i.startsWith("text/"))return _.text;if(i.startsWith("audio/"))return _.audio;if(i.startsWith("video/"))return _.video;var n=e.iconLink;return-1!==n.indexOf("googleusercontent.com/16/type/")&&(n=n.replace("/16/type/","/32/type/")),{url:n,size:18,color:"#fff"}}function i(i,n){var a=cjMaterial.createElement("griditem"),t="application/vnd.google-apps.folder"===i.mimeType,o=n.foldersOnTop&&t,r=e(i);if(!o){var l=document.createElement("div");if(l.className="g-doclist__griditem__thumbnail","__mdi:drive_image"===r.name&&l.classList.add("g-doclist__griditem__thumbnail--photo"),a.appendChild(l),i.hasThumbnail){var c=cjBasics.urls.create("https://drive.google.com/thumbnail",{authuser:g.account.authuser,id:i.id,v:s,sz:cjBasics.isRetina?"w288":"w144"});l.style.backgroundImage='url("'+c+'")'}else{var d=cjMaterial.createElement("icon",{size:96,color:"rgba(0, 0, 0, .15)",name:r.name});l.appendChild(d)}}if(n.hideLabels)a.classList.add("g-doclist__griditem--nolabels");else{var p=document.createElement("div");p.className="cj-md-grid__item__bottom g-doclist__griditem__bottom",a.appendChild(p);var m=cjMaterial.createElement("icon",r);p.appendChild(m);var _=document.createElement("div");_.className="cj-md-grid__item__textcontainer",p.appendChild(_);var u=document.createElement("div");if(u.textContent=i.name||"File",_.appendChild(u),i.name.length>20&&(u.name=i.name),o){var f=cjMaterial.createElement("iconbutton",{iconName:"__mdi:open_in_new",label:cjExtensions.i18n("cj_i18n_00123","Open folder in new tab"),onClick:function(e){var n=i.webViewLink;cjBasics.urls.insertParameter(n,"authuser",g.account.authuser),bmBasics.openTab(n),e.stopPropagation()}});f.classList.add("g-doclist__show-on-hover"),p.appendChild(f)}}return a}function n(e){var i=e.split("T")[0].split("-"),n=[parseFloat(i[0]),parseFloat(i[1])-1,parseFloat(i[2])];return bmBasics.createDate(n)}function a(i){var a="application/vnd.google-apps.folder"===i.mimeType,t=cjMaterial.createElement("item"),o=e(i),r=cjMaterial.createElement("icon",{withShell:!0,name:o.name,url:o.url,size:o.size,color:o.color});t.appendChild(r);var l=document.createElement("div");l.className="cj-md-item__body";var c=document.createElement("div");if(c.className="cj-md-item__header",c.textContent=i.name,l.appendChild(c),i.shared&&!a){var d=cjMaterial.createElement("icon",{name:"__mdi:people",size:20});d.className="g-doclist__listitem__shared",c.appendChild(d)}if(i.modifiedTime){var s=document.createElement("div"),p=n(i.modifiedTime);s.className="cj-md-secondarytext",s.textContent=" "+cjExtensions.i18n("cj_i18n_00006","modified")+": "+p,l.appendChild(s)}if(t.appendChild(l),a){var m=cjMaterial.createElement("iconbutton",{iconName:"__mdi:open_in_new",label:cjExtensions.i18n("cj_i18n_00123","Open folder in new tab"),onClick:function(e){var n=i.webViewLink;cjBasics.urls.insertParameter(n,"authuser",g.account.authuser),bmBasics.openTab(n),e.stopPropagation()}});m.classList.add("g-doclist__show-on-hover"),t.appendChild(m)}return t}function t(e){if(e.searching)return cjExtensions.i18n("cj_i18n_00116","Try a synonym or more general keyword");var i=cjExtensions.i18n("cj_i18n_00117","You can add new"),n=cjExtensions.i18n("cj_i18n_00118","using the button below");return i+" "+e.entityName+" "+n}function o(e){var i=cjExtensions.i18n("cj_i18n_00119","No"),n=cjExtensions.i18n("cj_i18n_00120","found");return i+" "+e.entityName+" "+n}function r(e){return cjMaterial.createElement("emptystate",{label:o(e),subLabel:t(e),iconName:e.emptyStateIcon,color:e.primaryColor})}function l(e){var i=cjBasics.urls.create("https://www.googleapis.com/drive/v3/files",{prettyPrint:!1,pageToken:e.pageToken,pageSize:e.pageSize,spaces:e.spaces,q:e.q,orderBy:e.orderBy,fields:"files(id,webViewLink,iconLink,name,mimeType,modifiedTime,shared,thumbnailLink,folderColorRgb),nextPageToken"});return g.request({scope:e.apiScopes,url:i,dataType:"JSON"}).then(function(e){return{nextPageToken:e.nextPageToken,files:e.files.map(function(e){return e.hasThumbnail="thumbnailLink"in e,delete e.thumbnailLink,e})}})}function c(e,n){var t;return t=n.listview?a(e):i(e,n),t.addEventListener("click",function(){n.onFileClick(e)}),t}function d(e){function i(e){for(var i=0;i<e.length;i++){var n=e[i];o&&!C&&"application/vnd.google-apps.folder"!==n.mimeType&&(C=!0,u.appendChild(v),u.appendChild(b));var a=c(n,t);o&&!C?j.appendChild(a):w.appendChild(a)}h.appendChild(j),b.appendChild(w)}function n(e){if(u.textContent="",C=!1,0===e.length){var n=r(t);u.appendChild(n)}else{h.textContent="",b.textContent="";var a="application/vnd.google-apps.folder"===e[0].mimeType;o&&a?(u.appendChild(f),u.appendChild(h)):(C=!0,u.appendChild(b)),u.appendChild(b),i(e)}}function a(){return bmBasics.toggleLoading("on",u),l(_).then(function(e){if(e.nextPageToken&&(_.pageToken=e.nextPageToken,u.setInfiniteScroll(a)),y){y=!1;var o=JSON.stringify(e.files);if(o===x)return void bmBasics.toggleLoading("off",u);g.cache.set(t.cachingId,o),n(e.files)}else i(e.files);bmBasics.toggleLoading("off",u)})}var t={listview:e.listview,onFileClick:e.onFileClick,entityName:e.entityName||cjExtensions.i18n("cj_i18n_00144","files"),emptyStateIcon:e.emptyStateIcon||"__mdi:drive_file",primaryColor:e.primaryColor||"#4285f4",searching:e.searching||!1,cachingId:e.cachingId||null,hideLabels:e.hideLabels,foldersOnTop:e.orderBy&&-1!==e.orderBy.indexOf("folder")},o=t.foldersOnTop,d=Math.round(document.documentElement.offsetHeight*document.documentElement.offsetWidth/7500);50>d&&(d=50);var s=[];e.spaces&&-1===e.spaces.indexOf("photos")||s.push(m),e.spaces&&-1===e.spaces.indexOf("drive")||s.push(p);var _={spaces:e.spaces||"drive,photos",orderBy:e.orderBy,q:e.q,pageSize:d,apiScopes:s},u=cjMaterial.createElement("container",{scrollable:!0,infiniteScroll:!0,loading:!0,darker:!t.listview}),f=cjMaterial.createElement("subheader",{label:cjExtensions.i18n("cj_i18n_00121","Folders"),color:e.subHeaderColor}),v=cjMaterial.createElement("subheader",{label:cjExtensions.i18n("cj_i18n_00122","Files"),color:e.subHeaderColor}),h=cjMaterial.createElement(t.listview?"list":"gridcontainer"),b=cjMaterial.createElement(t.listview?"list":"gridcontainer"),w=document.createDocumentFragment(),j=document.createDocumentFragment(),C=!1,y=!0,x=null;return t.cachingId&&g.cache.get(t.cachingId).then(function(e){if(y!==!1&&e){var i=JSON.parse(e);Array.isArray(i)&&(n(i),x=e)}}),a(),u}var s=Date.now().toString(),p="https://www.googleapis.com/auth/drive",m="https://www.googleapis.com/auth/drive.photos.readonly",_={archive:{name:"__mdi:drive_archive",color:"rgba(0, 0, 0, .3)"},audio:{name:"__mdi:drive_audio",color:"#ea4335"},datareport:{name:"__mdi:cj_drive_datastudio",color:"#3367d6"},chart:{name:"__mdi:drive_chart",color:"#34a853"},document:{name:"__mdi:drive_document",color:"#4285f4"},drawing:{name:"__mdi:drive_drawing",color:"#ea4335"},earth:{name:"__mdi:earth",color:"#4285f4"},excel:{name:"__mdi:drive_ms_excel",color:"#34a853"},form:{name:"__mdi:drive_form",color:"#673ab7"},fusion:{name:"__mdi:drive_fusiontable",color:"#34a853"},generic:{name:"__mdi:drive_file",color:"#4285f4"},image:{name:"__mdi:drive_image",color:"#ea4335"},keep:{name:"__mdi:drive_keep",color:"#FFCD40"},map:{name:"__mdi:place",color:"#ea4335"},pdf:{name:"__mdi:drive_pdf",color:"#FE4A22"},powerpoint:{name:"__mdi:drive_ms_powerpoint",color:"#FF752A"},presentation:{name:"__mdi:drive_presentation",color:"#FFCD40"},script:{name:"__mdi:drive_script",color:"#4285f4"},sites:{name:"__mdi:cj_atari_drive",color:"#3E50B4"},spreadsheet:{name:"__mdi:drive_spreadsheet",color:"#34a853"},text:{name:"__mdi:drive_text",color:"#4285f4"},video:{name:"__mdi:drive_video",color:"#ea4335"},word:{name:"__mdi:drive_ms_word",color:"#4583EA"},zip:{name:"__mdi:drive_zip",color:"rgba(0, 0, 0, .3)"},upload:{name:"__mdi:file_upload",color:"#b3b3b3"}};window.gDoclist={create:d}}();