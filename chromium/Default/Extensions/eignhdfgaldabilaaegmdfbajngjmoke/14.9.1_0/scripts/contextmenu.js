!function(){"use strict";function e(e){chrome.windows.create({type:"panel",focused:!0,url:cjBasics.urls.create("/app.html",e)})}function t(e,t){chrome.contextMenus.create({contexts:t.contexts||[t.context||"page"],id:e,title:t.title})}function o(){chrome.contextMenus.removeAll(),Object.keys(l).forEach(function(e){var o=l[e];return Array.isArray(o.limitToPages)?void n.then(function(i){for(var n=!1,l=0;l<o.limitToPages.length;l++)-1!==i.indexOf(o.limitToPages[l])&&(n=!0);n&&t(e,o)}):void t(e,o)})}function i(){chrome.contextMenus.onClicked.hasListener()||chrome.contextMenus.onClicked.hasListeners()||chrome.contextMenus.onClicked.addListener(function(e,t){l[e.menuItemId].onClick(e,t),i()})}var n=cjBasics.ajax({url:"pages.json",dataType:"JSON"}).then(function(e){return Object.keys(e)}),l={openInTab:{context:"browser_action",title:"Open in a new tab",onClick:function(){setTimeout(function(){chrome.tabs.create({url:"app.html"})})}},openInPanel:{context:"browser_action",title:"Open in a panel",onClick:function(){setTimeout(function(){chrome.windows.create({url:"app.html",width:800,height:600,type:"panel",focused:!0})})}},translateSelection:{limitToPages:["translate"],context:"selection",title:"Translate text",onClick:function(t){e({page:"translate",selection:t.selectionText})}},mapsSelection:{limitToPages:["maps"],context:"selection",title:"Locate address",onClick:function(t){e({page:"maps",selection:t.selectionText})}},emailSelection:{limitToPages:["gmail","inbox"],context:"selection",title:"Mail this text",onClick:function(e){chrome.windows.create({url:cjBasics.urls.create("https://mail.google.com/mail",{view:"cm",tf:0,body:e.selectionText+"\n\nSource: "+e.pageUrl}),focused:!0,width:500,height:516,type:"panel"})}},emailToSelection:{limitToPages:["gmail","inbox"],context:"selection",title:"Write mail to address",onClick:function(e){chrome.windows.create({url:cjBasics.urls.create("https://mail.google.com/mail",{view:"cm",tf:0,to:e.selectionText}),focused:!0,width:500,height:516,type:"panel"})}},bookmarkThisPage:{limitToPages:["bookmarks"],context:"page",title:"Bookmark this page",onClick:function(e,t){chrome.windows.create({url:cjBasics.urls.create("https://www.google.com/bookmarks/mark",{op:"edit",output:"popup",extension:"blackmenu",title:t.title,bkmk:e.pageUrl}),focused:!0,width:600,height:500,type:"panel"})}},bookmarkThisLink:{limitToPages:["bookmarks"],context:"link",title:"Bookmark this link",onClick:function(e){chrome.windows.create({url:cjBasics.urls.create("https://www.google.com/bookmarks/mark",{op:"edit",output:"popup",extension:"blackmenu",bkmk:e.linkUrl}),focused:!0,width:600,height:500,type:"panel"})}},gmailThisPage:{limitToPages:["gmail","inbox"],context:"page",title:"Mail this page",onClick:function(e,t){chrome.windows.create({url:cjBasics.urls.create("https://mail.google.com/mail",{view:"cm",tf:0,su:t.title,body:e.pageUrl}),focused:!0,width:500,height:516,type:"panel"})}},shareThisPage:{limitToPages:["gplus"],context:"page",title:"Share this page",onClick:function(e){chrome.windows.create({url:"https://plus.google.com/share?url="+e.pageUrl,focused:!0,width:500,height:516,type:"panel"})}},shareThisLink:{limitToPages:["gplus"],context:"link",title:"Share this link",onClick:function(e){chrome.windows.create({url:"https://plus.google.com/share?url="+e.linkUrl,focused:!0,width:500,height:516,type:"panel"})}},shortenPageUrl:{limitToPages:["urlshortener"],context:"page",title:"Shorten page url",onClick:function(t,o){e({page:"urlshortener",url:o.url})}},shortenLinkUrl:{limitToPages:["urlshortener"],context:"link",title:"Shorten this link url",onClick:function(t){e({page:"urlshortener",url:t.linkUrl})}}};o(),i()}();