var validTabIds;!function(){"use strict";function e(e){return-1!==validTabIds.indexOf(e)}var r=chrome.runtime.getURL("app.html");validTabIds=[-1],chrome.runtime.onMessage.addListener(function(e,s){if(s.url.startsWith(r)){var t=s.tab.id;if(e.addAllowedTabId)return void validTabIds.push(t);if(e.removeAllowedTabId){var a=validTabIds.indexOf(t);-1!==a&&validTabIds.splice(a,1)}}}),chrome.webRequest.onHeadersReceived.addListener(function(r){if(!e(r.tabId))return null;for(var s=r.responseHeaders,t=s.length-1;t>=0;--t){var a=s[t].name.toLowerCase();("x-frame-options"===a||"frame-options"===a)&&s.splice(t,1)}return{responseHeaders:s}},{urls:["https://*.google.com/*bm_embed=1*"],types:["sub_frame"]},["blocking","responseHeaders"]),chrome.webRequest.onBeforeSendHeaders.addListener(function(r){if(!e(r.tabId))return null;for(var s=r.requestHeaders,t=s.length-1;t>=0;--t){var a=s[t].name.toLowerCase();if("cookie"===a){var n=s[t].value;n=n.replace("; GPLUS_UI_BETA=1","").replace("; GPLUS_UI_BETA=0",""),s[t].value=n+"; GPLUS_UI_BETA=1"}}return{requestHeaders:s}},{urls:["https://*.google.com/*bm_gplus_use_beta=1*"],types:["sub_frame","xmlhttprequest"]},["blocking","requestHeaders"]),chrome.webRequest.onBeforeSendHeaders.addListener(function(r){if(!e(r.tabId))return null;for(var s=r.requestHeaders,t=s.length-1;t>=0;--t){var a=s[t].name.toLowerCase();"user-agent"===a&&(s[t].value="Mozilla/5.0 (Linux; Android 5.1.1; Nexus 6 Build/LYZ28E) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.20 Mobile Safari/537.36")}return{requestHeaders:s}},{urls:["https://*.google.com/*bm_mobile=1*"],types:["sub_frame"]},["blocking","requestHeaders"]),chrome.webRequest.onBeforeSendHeaders.addListener(function(r){if(!e(r.tabId))return null;var s=r.requestHeaders.filter(function(e){return"origin"!==e.name.toLowerCase()});return s.push({name:"Origin",value:"https://www.google.com"}),{requestHeaders:s}},{urls:["https://accounts.google.com/ListAccounts?listPages=1&source=ChromiumBrowser&json=standard"]},["blocking","requestHeaders"]),chrome.webRequest.onHeadersReceived.addListener(function(r){if(!e(r.tabId))return null;var s=r.responseHeaders;return s.push({name:"Access-Control-Allow-Origin",value:"*"}),{responseHeaders:s}},{urls:["https://translate.google.com/translate_a/single*"],types:["xmlhttprequest"]},["blocking","responseHeaders"])}();