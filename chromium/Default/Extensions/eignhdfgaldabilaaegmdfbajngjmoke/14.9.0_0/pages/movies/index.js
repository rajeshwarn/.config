cjModules.define(function(){"use strict";return function(e,t){function n(t){if(t&&"notAuthorized"===t.error){e.textContent="";var n=bmElements.createElement("fulldialog",{serviceLogo:{label:cjExtensions.i18n("cj_i18n_00424","Play Movies")},iconName:"play_movies",message:cjExtensions.i18n("cj_i18n_00379","Before you can use this page, you need to give access to Google Play Movies"),actionLabel:cjExtensions.i18n("cj_i18n_00224","Give permission"),action:t.authorize});e.appendChild(n)}}function a(e){var t=cjMaterial.createElement("griditem");t.addEventListener("click",function(){var t=cjBasics.urls.create(_+"details",{id:e.id,authuser:g.account.authuser});bmBasics.openTab(t)});var n=document.createElement("div");n.className="movieitem__thumbnail",n.style.backgroundImage='url("'+e.thumbnail+'")',t.appendChild(n);var a=document.createElement("div");a.className="cj-md-grid__item__bottom",t.appendChild(a);var i=document.createElement("div");i.className="cj-md-grid__item__textcontainer",a.appendChild(i);var r=document.createElement("div");r.textContent=e.title||cjExtensions("cj_i18n_00380","Movie"),i.appendChild(r);var o=[];if("number"==typeof e.year&&o.push(e.year),"number"==typeof e.duration&&e.duration>1&&o.push(e.duration+" mins"),o.length>0){var c=document.createElement("div");c.className="cj-md-secondarytext",c.textContent=o.join(", "),i.appendChild(c)}return cjColors.getDominantColor(e.thumbnail).then(function(e){a.style.backgroundColor=e.css,e.dark&&a.classList.add("cj-md--dark")}),e.title.length>20&&(r.title=e.title),t}function i(e){for(var t=document.createDocumentFragment(),n=0;n<e.length;n++){var i=a(e[n]);t.appendChild(i)}return t}function r(e){var t=e+"000",n=parseInt(t,10),a=new Date(n);return a.getUTCFullYear()}function o(e){return Math.round(e/60)}function c(e){for(var t=cjBasics.isRetina?392:196,n=1;n<e.length;n++)if(e[n].width<t)return e[n-1].url;return e[0].url}function s(e){return e.resource.map(function(e){var t=e.metadata;return{title:t.title,year:r(t.release_date_timestamp_sec),thumbnail:c(t.images),duration:o(t.duration_sec),id:e.resource_id.id}})}function l(e,t){return g.request({internal:!0,dataType:"JSON",scope:["https://www.googleapis.com/auth/android_video"],url:cjBasics.urls.create("https://www.googleapis.com/android_video/v1/"+e,t)})["catch"](n)}function u(){return l("recommendation",{alt:"json",cat:"type=movie",cr:"NL","if":"imobrg",lr:"en_US",max:"9"})}function d(e){return l("asset/list",{alt:"json",cr:"NL",fs:"peg",id:"yt:movie:"+e.join(",yt:movie:"),"if":"imobrg",lr:"en_US"})}function m(){return l("userlibrary",{alt:"json",max:"20"}).then(function(e){return e.resource.map(function(e){return e.resource_id.id})}).then(d)}function p(t){bmBasics.toggleLoading("on",e),f.textContent="";var n=cjMaterial.createElement("gridcontainer");f.appendChild(n);var a;a="mymovies"===t?m():u(),a.then(s).then(i).then(function(t){n.appendChild(t),bmBasics.toggleLoading("off",e)})}function h(){var e=cjMaterial.createElement("appbar",{color:j,secondary:!0}),n=cjMaterial.createElement("tabs",{fill:!0,items:[{id:"watchnow",label:cjExtensions.i18n("cj_i18n_00381","Watch now")},{id:"mymovies",label:cjExtensions.i18n("cj_i18n_00382","My movies")}],onChange:p,selected:y});return t.setOpenInNewHandler(function(){bmBasics.openTab("https://play.google.com/"+("watchnow"===n.selected?"store/":"")+"movies?authuser="+g.account.authuser)}),e.appendChild(n),e}function v(){bmBasics.toggleLoading("on",e);var t=bmElements.createElement("pageheader",{color:j,pageId:"movies",searchboxProperties:{submitInNewTab:!0,onSubmit:function(e){var t=cjBasics.urls.create(_+"search",{c:"movies",authuser:g.account.authuser,hl:g.lang,q:e});bmBasics.openTab(t)}}});e.appendChild(t);var n=h();e.appendChild(n),f=cjMaterial.createElement("container",{scrollable:!0,shadow:!0,darker:!0}),e.appendChild(f),b(t.searchbox.select),p(y)}var f,b=t.onPageDisplay,_="https://play.google.com/store/movies/",j="#ea4335",y="watchnow";v()}});