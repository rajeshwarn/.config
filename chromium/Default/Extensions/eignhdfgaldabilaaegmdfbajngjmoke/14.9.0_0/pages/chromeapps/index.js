cjModules.define(function(){"use strict";return function(e){function n(e){var n=chrome.extension.getURL("images/defaultIcon.png"),t=n,a=e&&e.icons,i=!1;return a&&(a.forEach(function(e){var n=cjBasics.isRetina?[64,128]:[32,64,128];n.forEach(function(n){i||e.size!==n||(t=e.url,i=!0)})}),i||(t=a[a.length-1].url)),t}function t(e){chrome.management.launchApp(e)}function a(){bmBasics.toggleLoading("on",e),r.textContent="";var a=document.createElement("ul");a.className="bm-ele-shortcutlist",a.addEventListener("click",function(e){e.target.parentNode===a&&t(e.target.dataset.id)}),l.then(function(e){e.forEach(function(e){if(e.enabled&&e.isApp){var t=cjMaterial.createElement("item");t.dataset.id=e.id;var i=cjMaterial.createElement("icon",{url:n(e),size:32});t.appendChild(i);var o=document.createElement("div");o.className="cj-md-item__body",o.textContent=e.shortName||e.name,t.appendChild(o),a.appendChild(t)}})}),r.appendChild(a),bmBasics.toggleLoading("off",e)}function i(){chrome.permissions.request({permissions:["management"]},function(e){e&&(a(),m.classList.remove("on"))})}function o(){m=bmElements.createElement("fulldialog",{serviceLogo:{labelPrefix:"",label:cjExtensions.i18n("cj_i18n_00078","Chrome Apps")},iconName:"chrome",message:cjExtensions.i18n("cj_i18n_00377","Before you can use this page, you need to give access to list your Chrome Apps"),actionLabel:cjExtensions.i18n("cj_i18n_00224","Give permission"),action:i}),e.appendChild(m)}function c(){chrome.permissions.contains({permissions:["management"]},function(e){e?a():o()})}function s(){bmBasics.toggleLoading("on",e);var n=bmElements.createElement("pageheader",{pageTitle:cjExtensions.i18n("cj_i18n_00078","Chrome Apps"),pageId:"chromeapps",light:!0});e.appendChild(n),r=cjMaterial.createElement("container",{scrollable:!0,shadow:"onScroll"}),e.appendChild(r),c()}var r,m,l=new Promise(function(e,n){window.chrome&&chrome.management?chrome.management.getAll(function(n){e(n.sort(function(e,n){return(e.shortName||e.name)>(n.shortName||n.name)?1:-1}))}):n(Error("Chrome management api not available"))});s()}});