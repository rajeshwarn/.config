cjModules.define(function(){"use strict";return function(e){function t(e){var t=cjMaterial.createElement("card",{withPadding:!0});t.addEventListener("click",function(){bmBasics.openTab(r+"l/"+e.id+"?hl="+g.lang)});var a=document.createElement("div");a.className="thumnail-container";var n=document.createElement("img");n.src=e.thumbnail,a.appendChild(n),t.appendChild(a);var c=document.createElement("div");c.className="details-container";var i=cjMaterial.createElement("title",{label:e.label});c.appendChild(i);var l=document.createElement("h4");l.className="owner-name",l.textContent="By "+e.ownerName,c.appendChild(l);var o=document.createElement("h4");o.className="product-count",o.textContent=e.count+" "+(1===e.count?"product":"products"),c.appendChild(o);var s=document.createElement("div");return e.sharedWith.forEach(function(e,t){if(8>t){var a=document.createElement("img");a.className="shared-with-avatar",a.src=e.photoUrl,s.appendChild(a)}}),c.appendChild(s),t.appendChild(c),t}function a(){return cjBasics.ajax({url:r+"_/api/lists?hl="+g.lang}).then(function(e){try{var t=[],a=JSON.parse(e.replace(/(\r\n|\n|\r)/gm,"").replace(')]}\'[["casr",',"").replace(/(\,\,)/gm,',"",').replace(/(\,\,)/gm,',"",').replace("]]]]]]","]]]]"));return a.forEach(function(e){var a=[e[6]].concat(e[7]),n=[];a.forEach(function(e){n.push({id:e[0],name:e[1],photoUrl:e[2].replace("s30",cjBasics.retina?"s64":"s32")})}),t.push({id:e[0],label:e[2],count:e[3]||0,thumbnail:"string"==typeof e[4]&&e[4].length>0?"https:"+e[4]:"https://www.gstatic.com/productsearch/static/social/empty_shortlist2.png",ownerName:e[6][1],sharedWith:n})}),t}catch(n){return n}})}function n(){var n=cjMaterial.createElement("container",{scrollable:!0,shadow:!0,darker:!0});return a().then(function(a){a.forEach(function(e){var a=t(e);n.appendChild(a)}),bmBasics.toggleLoading("off",e)}),n}function c(){bmBasics.toggleLoading("on",e);var t=bmElements.createElement("pageheader",{color:"#4285f4",pageId:"shortlists",pageTitle:cjExtensions.i18n("cj_i18n_00149","My Shortlists")});e.appendChild(t);var a=n();e.appendChild(a)}var r="https://www.google.com/shopping/shortlists/";"0"!==g.account.authuser&&(r+="u/"+g.account.authuser+"/"),c()}});