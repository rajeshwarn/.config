cjModules.define(function(){"use strict";return function(e){function n(e){var n=e.split("/c/")[1];bmBasics.openTab("https://classroom.google.com/u/"+g.account.authuser+"/c/"+n)}function o(){return g.cache.get("bm__cache__classroom__courses__response")}function t(e){var n=e||{};return n.noCache!==!0?o().then(function(e){return n.noCache=!0,e?{items:e,freshRequest:function(){return t(n)}}:t(n)}):g.request({scope:["https://www.googleapis.com/auth/classroom.courses.readonly"],url:cjBasics.urls.create("https://classroom.googleapis.com/v1/courses",{courseStates:["ACTIVE","PROVISIONED"],fields:"courses(alternateLink,name,section)",pageSize:"50"}),dataType:"JSON"}).then(function(e){return g.cache.set("bm__cache__classroom__courses__response",e),e},function(e){return g.cache.remove("bm__cache__classroom__courses__response"),e.body&&-1!==e.body.indexOf("@NotGoogleAppsUser")?Promise.reject({error:"notGoogleAppsUser"}):Promise.reject(e)})}function s(e){var o=cjMaterial.createElement("item"),t=cjMaterial.createElement("icon",{withShell:!0,symbol:e.name[0]});o.appendChild(t);var s=document.createElement("div");s.className="cj-md-item__body",o.appendChild(s);var a=document.createElement("div");if(a.className="cj-md-item__header",a.textContent=e.name,s.appendChild(a),"section"in e){var c=cjMaterial.createElement("secondarytext",{label:e.section});s.appendChild(c)}return o.addEventListener("click",function(){n(e.alternateLink)}),o}function a(){var n=cjMaterial.createElement("emptystate",{color:"#4b4b4b",label:cjExtensions.i18n("cj_i18n_00087","No courses found"),iconName:"__mdi:class"});i.appendChild(n),bmBasics.toggleLoading("off",e)}function c(n){if(i.textContent="",n.courses&&n.courses.length>0){var o=cjMaterial.createElement("list");n.courses.forEach(function(e){var n=s(e);o.appendChild(n)}),i.appendChild(o)}else a();n.freshRequest?n.freshRequest().then(c):bmBasics.toggleLoading("off",e)}function r(){bmBasics.toggleLoading("on",e);var n=bmElements.createElement("pageheader",{color:"#4b4b4b",pageId:"classroom",pageTitle:cjExtensions.i18n("cj_i18n_00305","Classroom")});e.appendChild(n),i=cjMaterial.createElement("container",{scrollable:!0,shadow:!0}),e.appendChild(i),t().then(c)["catch"](l)}var i,l=function(){var n=!1;return function(o){if(o&&n===!1&&"notAuthorized"===o.error){n=!0;var t=bmElements.createElement("fulldialog",{serviceLogo:{label:cjExtensions.i18n("cj_i18n_00305","Classroom")},iconName:"classroom",message:cjExtensions.i18n("cj_i18n_00237","To use Classroom, you need to give access to display your Classroom classes"),actionLabel:cjExtensions.i18n("cj_i18n_00224","Give permission"),action:o.authorize});e.appendChild(t)}}}();r()}});