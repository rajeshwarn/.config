cjModules.define(function(){"use strict";return function(e,t){function n(){r.then(function(){(!bmRuntime.portalOnSide||bmRuntime.servicePageData.translate.menuItem.classList.contains("selected"))&&i.iframeElement.contentWindow.postMessage({focus:!0},"*")})}function a(e){r.then(function(){"string"==typeof e&&e.length>0&&i.iframeElement.contentWindow.postMessage({text:e},"*")})}var o=t.onPageDisplay;bmBasics.toggleLoading("on",e),e.classList.add("cj-md-container--darker");var s=bmElements.createElement("pageheader",{pageId:"translate",floating:!0});e.appendChild(s);var c=cjBasics.urls.create("https://translate.google.com/m/translate",{bm_contentscript:"translate",bm_embed:"1",bm_toolbar_button_count:bmBasics.getMainToolbarButtonCount(),authuser:g.account.authuser,hl:g.lang}),i=bmElements.createElement("iframe",{src:c,noLoading:!0});t.setOpenInNewHandler(function(){i.sendMessage({method:"translateOpenInNew"})});var r=new Promise(function(e){i.iframeElement.addEventListener("load",function(){e()})});r.then(function(){bmBasics.toggleLoading("off",e)}),e.appendChild(i),o(n),n();var l=cjBasics.urls.getParameters();l.selection?a(l.selection):window.chrome&&chrome.tabs&&chrome.tabs.executeScript&&chrome.tabs.executeScript({code:"window.getSelection().toString();"},function(e){a(e)})}});