!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){e.exports=n(81)},4:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),i=r(o);i.default.incr=function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=this.get(e,0)+t;return this.set(e,n),n},t.default=i.default,e.exports=t.default},5:function(e,t,n){!function(n,r){"undefined"!=typeof e&&e.exports&&(t=e.exports=r(n,t))}(this,function(e,t){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),t.prefix="",t._getPrefixedKey=function(e,t){return t=t||{},t.noPrefix?e:this.prefix+e},t.set=function(e,t,n){var r=this._getPrefixedKey(e,n);try{localStorage.setItem(r,JSON.stringify({data:t}))}catch(e){console}},t.get=function(e,t,n){var r,o=this._getPrefixedKey(e,n);try{r=JSON.parse(localStorage.getItem(o))}catch(e){try{r=localStorage[o]?JSON.parse('{"data":"'+localStorage.getItem(o)+'"}'):null}catch(e){console}}return null===r?t:"undefined"!=typeof r.data?r.data:t},t.sadd=function(e,n,r){var o,i=this._getPrefixedKey(e,r),a=t.smembers(e);if(a.indexOf(n)>-1)return null;try{a.push(n),o=JSON.stringify({data:a}),localStorage.setItem(i,o)}catch(e){console}},t.smembers=function(e,t){var n,r=this._getPrefixedKey(e,t);try{n=JSON.parse(localStorage.getItem(r))}catch(e){n=null}return null===n?[]:n.data||[]},t.sismember=function(e,n,r){this._getPrefixedKey(e,r);return t.smembers(e).indexOf(n)>-1},t.getAll=function(){var e=Object.keys(localStorage);return e.map(function(e){return t.get(e)})},t.srem=function(e,n,r){var o,i,a=this._getPrefixedKey(e,r),s=t.smembers(e,n);i=s.indexOf(n),i>-1&&s.splice(i,1),o=JSON.stringify({data:s});try{localStorage.setItem(a,o)}catch(e){console}},t.rm=function(e){localStorage.removeItem(e)},t.flush=function(){localStorage.clear()},t})},6:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=r(o),a=chrome.runtime.id;t.EXTENSION_ID=a;var s="https://chrome.google.com/webstore/detail/"+a;t.WEBSTORE_LINK=s;var c="https://chrome.google.com/webstore/detail/"+a+"/reviews";t.WEBSTORE_REVIEW_LINK=c;var u="http://www.facebook.com/plugins/like.php?href="+encodeURIComponent(s)+"&send=false&layout=standard&width=450&show_faces=true&font&colorscheme=light&action=recommend&height=80&appId=314647198631310";t.FACEBOOK_IFRAME_LIKE_LINK=u;var d="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(s);t.FACEBOOK_SHARE_LINK=d;var l=window.localStorage["ads:enabled"],p=window.localStorage["annotations:enabled"],f={adblockEnabled:!!(0,i.default)(l)||l,annotationsBlockEnabled:!(0,i.default)(p)&&p,autoUpdate:!0};t.DEFAULT_OPTIONS=f},7:function(e,t){function n(e){return void 0===e}e.exports=n},11:function(e,t){"use strict";function n(e,t,n,o,i){r.push(["_trackEvent",e,t,n,o,i])}Object.defineProperty(t,"__esModule",{value:!0}),t.trackEvent=n;var r=window._gaq=[];r.push(["_setAccount","UA-55554816-1"]);var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://ssl.google-analytics.com/ga.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i),t.default=r},64:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(0,l.default)().then().then(function(e){e&&(0,d.isEnabledByUser)().then(function(e){e&&i()})})}function i(){return f||(n(67),window.onBestPriceFirstRun(a),t.initialized=f=!0),!0}function a(){chrome.tabs.executeScript({file:"scripts/content.comprigo-firstrun.js",runAt:"document_end"})}function s(){(0,p.trackEvent)("Comprigo","user-disabled",chrome.runtime.getManifest().version),chrome.storage.local.set({comprigoEnabled:!1},function(){return u()})}function c(){(0,p.trackEvent)("Comprigo","user-enabled",chrome.runtime.getManifest().version),chrome.storage.local.set({comprigoEnabled:!0},function(){return u()}),window.localStorage.setItem("cpgBestPriceDisabled",JSON.stringify(!1))}function u(){chrome&&chrome.runtime&&chrome.runtime.reload?chrome.runtime.reload():chrome.runtime.sendMessage({action:"RELOAD"})}Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=o,t.disable=s,t.enable=c;var d=n(65),l=r(d),p=n(11),f=!1;t.initialized=f;var g=d.isEnabledByUser;t.isEnabled=g,t.default=window.comprigo={initialize:o,disable:s,enable:c}},65:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return new Promise(function(e){var t=new window.Image;t.onload=function(){return e(!1)},t.onerror=function(){return e(!0)},t.src="chrome-extension://gbkjddnnlgmahpnjjkiolhoophlpibfn/img/Pricescout_38x38.png"})}function i(){return new Promise(function(e){return chrome.storage.local.get(d.default,function(t){var n=t.comprigoEnabled;return e(n)})})}function a(){return"de"!==navigator.language.split("-")[0]}function s(){var e=864e5,t=Math.floor(Math.random()*e*35)+1,n=1*e+t;return new Promise(function(e){chrome.storage.local.get("cinstallDate",function(t){var r=t.cinstallDate;return window.localStorage.cmpFirstTimeActive||window.localStorage.browserAppBase_ustrda?e(!0):r?void e(r<Date.now()):(chrome.storage.local.set({cinstallDate:Date.now()+n}),e(!1))})})}function c(){var e=[a,o,s];return Promise.all(e.map(function(e){return e()})).then(function(e){var t=!e.some(function(e){return!e});return t})}Object.defineProperty(t,"__esModule",{value:!0}),t.pricescoutIsNotInstalled=o,t.isEnabledByUser=i,t.isRightLocale=a,t.isInstallTimeoutOver=s,t.default=c;var u=n(66),d=r(u)},66:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={comprigoEnabled:!0},e.exports=t.default},67:function(e,t){"use strict";var n={browserSpecific:{gc:{}},shared:{},index:{}};n.browserSpecific.gc.logger=function(){var e={exports:{}},t=function(){var e={};return{getLogger:function(t){return e[t]||(e[t]=function(e){}),e[t]}}}();return e.exports=t,e.exports}(),n.shared.logger=function(){var e={exports:{}},t=n.browserSpecific.gc.logger;return e.exports=t,e.exports}(),n.browserSpecific.gc.storage=function(){var e={exports:{}},t=n.shared.logger,r=t.getLogger("storage.js"),o=function(e){return"browserAppBase_"+e},i=function(e,t){if(e=o(e),localStorage[e])try{return r("Value extracted successfully, returning."),JSON.parse(localStorage[e])}catch(e){r("Error: error with JSON parse.")}return void 0===t?null:t},a=function(e,t){var n=JSON.stringify(t);e=o(e),localStorage[e]=n},s={get:function(e,t){var n,r={};for(n in e)if(e.hasOwnProperty(n)){var o=i(n,e[n]);void 0===o?o=e[n]:r[n]=o}t&&t(r)},set:function(e,t){var n;for(n in e)if(e.hasOwnProperty(n))try{a(n,e[n])}catch(e){}t&&t(e)}};return e.exports=s,e.exports}(),n.shared.isSupportedShop=function(){var e={exports:{}},t=n.shared.logger,r=(t.getLogger("isSupportedShop.js"),function(e){return e.replace(/^https?:\/\//i,"").replace(/\/.*/,"")}),o=function(e){if(!e.match(/^https?:\/\//i))return!1;for(blockedShop in n.shared.blockedShops){for(var t=blockedShop.split(".");t.length>1;)delete n.domains.obj[t.join(".")],t.splice(0,1);delete n.shared.blockedShops[blockedShop]}for(var o=r(e),i=!1,a=o.split(".");a.length>1&&!i;){if(i=n.domains.obj[a.join(".")]){var s=a.join("."),c=new RegExp(n.domains.obj[s]);return!!e.match(c)&&{regex:n.domains.obj[s],domain:s}}a.splice(0,1)}return!1};return e.exports=o,e.exports}(),n.shared.time=function(){var e={exports:{}},t={stamp:function(e){var t;return e===!0?(t=new Date,t.getTime()+6e4*t.getTimezoneOffset()):(t=new Date,Math.round(t.getTime()/1e3)+60*t.getTimezoneOffset())},dateString:function(){return(new Date).toDateString()},dayPassedSince:function(e){var t=this.stamp()-e;return t>86400},past4am:function(){var e=new Date,t=e.getHours();return t-4>0}};return e.exports=t,e.exports}(),n.browserSpecific.gc.onNavigate=function(){var e={exports:{}},t=[],n=!1;chrome.tabs.onUpdated.addListener(function(e,r,o){if(n&&!JSON.parse(localStorage.getItem("cpgBestPriceDisabled"))&&"complete"===r.status)for(var i=0;i<t.length;i++)t[i](o,o.url)});var r={register:function(e){t.push(e)},unregister:function(e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)},enable:function(){n=!0},disable:function(){n=!1}};return e.exports=r,e.exports}(),n.browserSpecific.gc.setGoodbyePage=function(){var e={exports:{}},t=function(e){};return e.exports=t,e.exports}(),n.browserSpecific.gc.injectContentScript=function(){var e={exports:{}},t=n.shared.logger,r=(t.getLogger("inject-script.js"),function(e){chrome.tabs.executeScript(e.id,{file:"scripts/content.comprigo.js",runAt:"document_end"})});return e.exports=r,e.exports}(),n.browserSpecific.gc.ajax=function(){var e={exports:{}},t=n.shared.logger,r=(t.getLogger("ajax.js"),function(e,t,n){try{if(!e||!t)return;n||(n={}),n.headers||(n.headers={}),n.postStr||(n.postJSobj?n.postStr=JSON.stringify(n.postJSobj):n.postStr=null);var r=n.postStr?"POST":"GET",o=new XMLHttpRequest;o.open(r,e,!0),o.overrideMimeType("text/plain"),o.setRequestHeader("Content-type","application/json");var i;for(i in n.headers)o.setRequestHeader(i,n.headers[i]);o.onreadystatechange=function(){4===o.readyState&&t(o)},o.send(n.postStr)}catch(e){}}),o=function(e,t){r(e,function(e){var n={};try{n=JSON.parse(e.responseText)}catch(e){}t(n)})};return e.exports=o,e.exports}(),n.shared.config=function(){var e={exports:{}},t=function(){var e=function(){var e="comp",t="rigo";return e+t}(),t=function(){var t="https",n="rules."+e+".com",r="v1.0";return{baseUrl:t+"://"+n+"/"+r}}(),n=function(){return"http://external-rules."+e+".com/inline/v2/returnCookies"}();return{rootDomain:e,optIn:!1,partner:{pid:1300,subid:"v15"},rulesApp:t,instTrUrl:"https://installation-tracking.herokuapp.com/tracking/<PID>/install/?subid=",gbyUrlBase:"http://pricescout.io/sorry-to-see-you-go",inlineCookieEndpoint:n}}();return e.exports=t,e.exports}(),n.ustrda=function(){return new Promise(function(e,t){n.browserSpecific.gc.storage.get({ustrda:{}},function(r){var o=n.config.instTrUrl,i=n.config.gbyUrlBase;"object"!=typeof r.ustrda||0!==Object.keys(r.ustrda).length?(i+="?bata="+r.ustrda,e(i)):n.browserSpecific.gc.ajax(o,function(e){n.browserSpecific.gc.storage.set({ustrda:e.bata}),t()})})})},n.partnerData=function(){function e(e){var t=e.pid,n=e.subid,r=e.tid,o=e.conversionURL;return o?(o.indexOf("<PID>")>-1&&(o=o.replace("<PID>",t)),o.indexOf("<SUBID>")>-1&&(o=o.replace("<SUBID>",n)),o.indexOf("<TID>")>-1&&(o=o.replace("<TID>",r)),o):null}var t={exports:{}},r={basic:n.shared.config.partner,details:{}};return t.exports=function(){return new Promise(function(t,o){setTimeout(function(){n.browserSpecific.gc.storage.get({inlineCookieData:{}},function(o){var i=!0;if("object"!=typeof o.inlineCookieData||0!==Object.keys(o.inlineCookieData).length)try{i=0===Object.keys(JSON.parse(decodeURIComponent(atob(o.inlineCookieData)))).length&&decodeURIComponent(atob(o.inlineCookieData))===JSON.stringify({})}catch(e){i=!0}var a=i?"":"?rookie="+atob(o.inlineCookieData);n.browserSpecific.gc.ajax(n.shared.config.inlineCookieEndpoint+a,function(o){o.redexuserdata&&(o.redexuserdata.pid&&(r.basic.pid=o.redexuserdata.pid,r.basic.subid=o.redexuserdata.subid?o.redexuserdata.subid:r.basic.subid),o.redexuserdata.tid&&o.redexuserdata.conversionURL?(r.details.tid=o.redexuserdata.tid,r.details.conversionURL=e(o.redexuserdata)):r.details.conversionURL=n.shared.config.instTrUrl.replace("<PID>",r.basic.pid)+r.basic.subid,n.browserSpecific.gc.storage.set({inlineCookieData:btoa(encodeURIComponent(JSON.stringify(o)))})),t(r)})})},500)})}(),t.exports}(),n.index=function(){var e,t,r={exports:{}},o=function(){var t=function(){var t=JSON.parse(localStorage.getItem("cmpFirstTimeActive"));t||(localStorage.setItem("cmpFirstTimeActive",JSON.stringify(!0)),e())},n="complete"==window.document.readyState||"interactive"==window.document.readyState||"loaded"===window.document.readyState;n?t():document.addEventListener("DOMContentLoaded",function(e){t()})};return window.onBestPriceFirstRun=function(n){return t?void n():void(e=n)},chrome.runtime.onMessage.addListener(function(n,r){if("cpgGetAboutUrl"===n.request){var i=chrome.extension.getURL("pages/bestprice.html");window.open(i,"_blank")}if("cpgGetDisableUrl"===n.request){var a=chrome.extension.getURL("pages/bestprice-disabled.html");window.open(a,"_blank")}if("cpgDisableSelf"===n.request&&localStorage.setItem("cpgBestPriceDisabled",JSON.stringify(!0)),"cpgBestPriceFirstDisplay"===n.request){if(!e)return void(t=!0);o()}}),n.partnerData.then(function(e){n.partner=n.shared.config.partner,n.partner.pid=e.basic.pid,n.partner.subid=e.basic.subid,n.config=n.shared.config,n.log=n.shared.logger.getLogger("browserAppBase"),n.ajax=n.browserSpecific.gc.ajax,n.injectContentScript=n.browserSpecific.gc.injectContentScript,n.onNavigate=n.browserSpecific.gc.onNavigate,n.time=n.shared.time,n.isSupportedShop=n.shared.isSupportedShop,n.rulesApp=n.config.rulesApp,n.storage=n.browserSpecific.gc.storage,n.domains={},n.domains.obj={},n.domains.updating=!0,n.domains.update=function(){return new Promise(function(e,t){var r=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},o=n.config.rulesApp.baseUrl+"/shops/0";n.log("Domains need to be updated. Sending request to: "+o),n.ajax(o,function(t){r(t)&&e("empty");var o=n.time.dateString();n.domains.obj=t.domains||n.domains.obj,n.domains.domainsDS=o,n.cj.domains=t["cj-domains"]||n.cj.domains,n.storage.set({domains:n.domains.obj,domainsDS:o}),n.domains.updating=!1,e("stored")})})},n.storage.get({domains:{},domainsDS:null},function(e){n.domains.obj=e.domains,n.domains.domainsDS=e.domainsDS,n.domains.updating=!1}),n.checkUpdate=function(){return new Promise(function(e,t){n.domains.updating&&e("updateInProgress");var r=n.time.dateString();n.domains.domainsDS!==r&&n.time.past4am()?(n.domains.updating=!0,n.storage.get({domains:{},domainsDS:null},function(){n.domains.update().then(function(t){e("updated")})})):(n.log("Domains don't need to be updated"),e("upToDate"))})},n.onNavigate.register(function(e,t){n.checkUpdate().then(function(r){var o=n.isSupportedShop(t);return o?(n.injectContentScript(e),void n.log("Injecting main.js into web site: "+o.domain)):void n.log("Not supported domain.")})}),n.enable=function(e,t){n.partner={pid:e,subid:t},n.onNavigate.registerListener()},n.disable=function(){n.onNavigate.removeListener()},e.details.conversionURL?n.config.instTrUrl=e.details.conversionURL:n.config.instTrUrl=n.config.instTrUrl.replace("<PID>",n.partner.pid)+n.partner.subid,chrome.runtime.onMessage.addListener(function(e,t){"partner-data"===e.request&&chrome.tabs.sendMessage(t.tab.id,{message:"partner-data",data:JSON.stringify(n.partner)})}),!localStorage.fdEnabled&&n.shared.config.optIn||(n.onNavigate.enable(),setTimeout(function(){!function e(){n.ustrda().then(function(e){},function(){setTimeout(function(){e()},5e3)})}()},1e3))}),r.exports}(),n.shared.blockedShops={},n.cj={},n.cj.domains={"anrdoezrs.net":1,"kqzyfj.com":1,"jdoqocy.com":1,"tkqlhce.com":1,"dpbolvw.net":1},n.cj.redirectColl={},n.cj.redirectIgnore={},chrome.webRequest.onBeforeRedirect.addListener(function(e){var t=e.url.replace(/^https?:/i,""),r=e.redirectUrl.replace(/^https?:/i,"");if(n.cj.redirectIgnore[t])return void delete n.cj.redirectIgnore[t];if(n.cj.redirectColl[t])return delete n.cj.redirectColl[t],void(n.cj.redirectColl[r]=1);var o=e.url.split("/");if("http:"===o[0]||"https:"===o[0]){var i=o[2].split(".");if(i.indexOf("comprigo")>-1){var a=e.redirectUrl.split("/");if("http:"!==a[0]&&"https:"!==a[0])return;for(var s=a[2].split(".");s.length>1;){if(n.cj.domains[s.join(".")]){n.cj.redirectIgnore[r]=1;break}s.splice(0,1)}}else for(;i.length>1;){if(n.cj.domains[i.join(".")]){n.cj.redirectColl[r]=1;break}i.splice(0,1)}}},{urls:["<all_urls>"]}),chrome.webRequest.onResponseStarted.addListener(function(e){var t=e.url.replace(/^https?:/i,"");if(n.cj.redirectColl[t]){for(var r=!0,o=0;o<e.responseHeaders.length;o++)if(/location/im.test(e.responseHeaders[o].name)){r=!1;break}if(r){delete n.cj.redirectColl[t];var i=t.split("/")[2];n.shared.blockedShops[i]=!0}}},{urls:["<all_urls>"]},["responseHeaders"])},77:function(e,t){"use strict";function n(){var e,t=arguments.length<=0||void 0===arguments[0]?"message":arguments[0],n=document.getElementsByTagName("*");for(e=0;e<n.length;e++)n[e].dataset&&n[e].dataset[t]&&(n[e].innerHTML=chrome.i18n.getMessage(n[e].dataset[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.translateHTML=n},81:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return document.querySelector(e)}function a(e){var t=i("#pause .state");t.className="state "+(e?"enabled":"disabled")}function s(){(0,S.trackEvent)("Extension","toggleBlocker"),chrome.extension.sendMessage({action:"toggle:adblockEnabled"},a)}function c(e){var t=i("#pause-annotations .state");t.className="state "+(e?"enabled":"disabled")}function u(){(0,S.trackEvent)("Extension","toggleBlocker"),chrome.extension.sendMessage({action:"toggle:annotationsBlockEnabled"},c)}function d(){document.getElementById("likebtn").addEventListener("click",function(){(0,S.trackEvent)("Extension","activateFBLikeBtns");var e=i(".spinner");e.style.display="block";var t=i("#facebook-like-btn");t.src=m.FACEBOOK_IFRAME_LIKE_LINK,t.onload=function(){e.style.display="none",t.style.display="block"},this.parentNode.style.display="none"},!1)}function l(){(0,x.isEnabled)().then(function(e){var t=i("#pause-comprigo .state");t.className="state "+(e?"enabled":"disabled")})}function p(){(0,x.isEnabled)().then(function(e){return e?(0,x.disable)():(0,x.enable)()})}function f(){(0,v.translateHTML)(),d(),l(),a(b.default.get("adblockEnabled")),c(b.default.get("annotationsBlockEnabled")),i("#logo").href=m.WEBSTORE_LINK,i("#ratelink").href=m.WEBSTORE_REVIEW_LINK,i("#pause").addEventListener("click",s,!1),i("#pause-annotations").addEventListener("click",u,!1),i("#pause-comprigo").addEventListener("click",p,!1),(0,w.default)().then(function(e){e&&(i("#pause-comprigo").style.display="block")})}var g=n(6),m=o(g),h=n(4),b=r(h),v=n(77),S=n(11),x=n(64),y=n(65),w=r(y);f()}});