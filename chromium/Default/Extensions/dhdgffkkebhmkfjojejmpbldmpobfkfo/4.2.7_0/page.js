Registry.registerRaw("page.js","5362",{inject:function(a){var x=document.createElement("script");x.textContent=a;(document.head||document.body||document.documentElement||document).appendChild(x);x.parentNode.removeChild(x)},backup:function(a,x,l,I){var c={safeWindow:{},safeDocument:{},eval:eval,Context:{D:I},exec_fn:function(a,b,J){k(new c.safeWindow.Function(a),b,J)},exec_csp:function(a,b,J){var f="__u__"+19831207*c.Context.M_r();c.Message.send("csp",{id:f,src:a});c.exec_script(f,b,
J)},exec_script:function(a,b,c){var f=window[a];delete window[a];k(f,b,c)}},k,b,B,D,m;(function(){var d=function(a){var b=function(b){return k(a,b,k(B.wrappedJSObject,arguments,[1]))};b.wrappedJSObject=a;return b},R={F_a:k=function(){var b=a.Function.apply;return function(a,c,d){a.apply===b?c=a.apply(c,d):(a[l]=b,c=a[l](c,d),delete a[l]);return c}}(),E_u:function(b,d){if(c.exec_eval){var l="__u__"+(19831206*c.Context.M_r()+1),k=l+"_";window[k]=d;var e=c.Context.F_c(c.Context.eval,window,"(function() {"+
b+'}).apply(window["'+k+'"])');delete a[l];delete a[k];return e}c.exec_csp(b,d)},E_c:function(a,b){c.exec_eval?k(new c.safeWindow.Function(a),b):c.exec_csp(a,b)},F_c:d(a.Function.call),F_b:b=d(a.Function.bind),F_tS:d(a.Function.toString),A_fE:d(a.Array.prototype.forEach),A_sl:B=d(a.Array.prototype.slice),A_sp:d(a.Array.prototype.splice),A_sh:d(a.Array.prototype.shift),A_j:d(a.Array.prototype.join),A_pu:d(a.Array.prototype.push),A_po:d(a.Array.prototype.pop),A_m:d(a.Array.prototype.map),A_c:d(a.Array.prototype.concat),
A_f:d(a.Array.prototype.filter),A_iO:d(a.Array.prototype.indexOf),O_k:a.Object.keys,O_dP:a.Object.defineProperties,O_gOPN:a.Object.getOwnPropertyNames,O_gOPD:a.Object.getOwnPropertyDescriptor,O_dG:d(a.Object.prototype.__defineGetter__),O_dS:d(a.Object.prototype.__defineSetter__),O_tS:d(a.Object.prototype.toString),J_p:m=a.JSON.parse,J_s:D=a.JSON.stringify,c_l:a.console.log.bind(a.console),c_i:a.console.info.bind(a.console),c_w:a.console.warn.bind(a.console),c_e:a.console.error.bind(a.console),c_d:a.console.debug.bind(a.console),
M_f:a.Math.floor,M_r:a.Math.random,M_m:a.Math.max,N_tS:d(a.Number.prototype.toString),R_rAAB:d(a.FileReader.prototype.readAsArrayBuffer),S_fCC:a.String.fromCharCode,S_m:d(a.String.prototype.match),S_su:d(a.String.prototype.substr),S_sp:d(a.String.prototype.split),S_r:d(a.String.prototype.replace),S_cCA:d(a.String.prototype.charCodeAt),S_tLC:d(a.String.prototype.toLowerCase),S_tUC:d(a.String.prototype.toUpperCase),D_pFS:d(a.DOMParser.prototype.parseFromString),X_o:d(a.XMLHttpRequest.prototype.open),
X_sRH:d(a.XMLHttpRequest.prototype.setRequestHeader),X_oMT:d(a.XMLHttpRequest.prototype.overrideMimeType),X_gARH:d(a.XMLHttpRequest.prototype.getAllResponseHeaders),X_gRH:d(a.XMLHttpRequest.prototype.getResponseHeader),X_s:d(a.XMLHttpRequest.prototype.send),X_a:d(a.XMLHttpRequest.prototype.abort),D_n:a.Date.now};Object.keys(R).forEach(function(a){c.Context[a]=R[a]});"String Array Object Number parseInt JSON Math Date Event MutationEvent console location Error Uint8Array Blob FileReader DOMParser XMLHttpRequest Function RegExp frames self top document location".split(" ").forEach(function(b){c.safeWindow[b]=
a[b]});"postMessage addEventListener removeEventListener setTimeout setInterval clearTimeout clearInterval alert prompt confirm encodeURIComponent decodeURIComponent encodeURI decodeURI escape unescape atob btoa close".split(" ").forEach(function(b){var d=a[b];c.safeWindow[b]=function(){return k(d,a,arguments)}});c.createSafeDocument=function(a){"getElementById createEvent createElement dispatchEvent addEventListener removeEventListener".split(" ").forEach(function(b){var d=a[b];c.safeDocument[b]=
function(){return k(d,a,arguments)}})};c.createSafeDocument(x)})();try{c.Message=function(a,b){var c=function(){return k(b.dispatchEvent,b,arguments)},f=function(){return k(b.addEventListener,b,arguments)},l=function(){return k(b.removeEventListener,b,arguments)},x=function(a,c){var d=b.createEvent("MutationEvent");d.initMutationEvent(a,!1,!1,null,null,null,D(c),d.ADDITION);return d},e=function(a,b){var c;a&&(c=ca[a])&&(c(b),delete ca[a])},B,I,K,U,fa=1,ca={},aa=function(a){var b=m(a.attrName);"message.response"==
b.m?e(b.r,b.a):B&&B(b,b.r?function(a){a=x(K,{m:"message.response",a:a,r:b.r});c(a)}:function(){})};return{init:function(a){U||(U=a);K="2C_"+U;I="2P_"+U;f(I,aa,!1)},send:function(a,b,d){if(d){var e=++fa;ca[fa]=d;d=e}else d=null;a=x(K,{m:a,a:b,r:d});c(a)},onMessage:{setListener:function(a){B=a}},cleanup:function(){aa&&l(I,aa,!1);aa=null}}}(c.safeWindow,c.safeDocument),c.Message.init(l),c.Message.onMessage.setListener(function(a){if(c)if("load"==a.m)c.Context.pageLoaded=!0;else if("DOMContentLoaded"==
a.m)c.Context.domContentLoaded=!0;else if("cleanup"==a.m)c.Message.cleanup(),c=null;else if("next"==a.m)if(a.a.id)c.exec_script(a.a.id,c),c.exec_eval=!1;else{if(void 0===c.exec_eval)try{c.exec_eval=b(c.eval,window)("true")}catch(l){c.exec_eval=!1}c.exec_eval?c.exec_fn(a.a.src,c):c.exec_csp(a.a.src,c)}})}catch(d){}},next:function(a,x,l,I,c,k,b,B,D,m,d,R,J,f,la){var H="";B&&(H+="var V = true;\n");m&&(H+="var EV = true;\n");D&&(H+="var ENV = true;\n");m="";if(J||"complete"==document.readyState)m+="Context.pageLoaded |= true;\nContext.domContentLoaded |= true;\n";
else if(f||"interactive"==document.readyState)m+="Context.domContentLoaded |= true;\n";return['var backup = this;\n(function TM_back() {var Context = backup.Context;\nvar copy = function(src) {"use strict";var props = Context.O_gOPN(src);for (var kk, ii=0; (kk=props[ii]) !== undefined; ii++) {Context[kk] = src[kk];};};copy(backup);with (Context) {(function() {"use strict";copy({Context: Context,V:',B?"true":"false",",ENV:",D?"true":"false",",TS:",d?"true":"false",",D:",R?"true":"false",",use:",k,
",windowProps:",I,",scripts:",x,",powers:",l,",_content: false,flags:",c,',write_listeners: []});var cleanup = function(evt) {Message.cleanup();safeWindow.removeEventListener("unload", cleanup, false);};safeWindow.addEventListener("unload", cleanup, false);Context.write_listeners.push(function(d) {Context.createSafeDocument(d);Message.init();});',H+("var logLevel = "+b+";\n")+('var contextId = "'+a+'";\n')+"var Event = function() {};var Window = function() {};Window.prototype = {};"+m+"("+la+")(Context, contextId);\n",
"})();};})()"].join("")},environment:function(a,x){var l=a.V,I=a.EV,c=a.D,k=a.Message,b=a.safeWindow,B=a.safeDocument,D=a.flags,m=a.F_a,d=a.F_c,R=a.F_b,J=a.F_tS,f=a.A_fE,la=a.A_sl,H=a.A_sp,e=a.A_pu,Aa=a.A_po,na=a.A_sh,K=a.A_j,U=a.A_f,fa=a.A_iO,ca=a.A_m,aa=a.A_c,C=a.O_k,Z=a.O_dP,za=a.O_gOPN,oa=a.O_gOPD,ga=a.O_dG,pa=a.O_dS,Ba=a.O_tS,da=a.J_p,ha=a.J_s,w=a.c_l,Ca=a.c_i,S=a.c_w,ea=a.c_e,r=a.c_d,Da=a.M_f,qa=a.M_r,ra=a.M_m,sa=a.S_fCC,ia=a.S_m,ta=a.S_su,ua=a.S_sp,V=a.S_r,va=a.S_cCA,wa=a.S_tLC,Ea=a.S_tUC,
Fa=a.R_rAAB,Ga=a.D_pFS,Ha=a.X_o,Ia=a.X_sRH,Ja=a.X_oMT,Ka=a.X_gARH,La=a.X_gRH,Ma=a.X_s,Na=a.X_a,Oa=a.N_tS,ja=a.D_n;a.domContentLoaded|=0;a.pageLoaded|=0;a.domNodeInserted|=0;a.props={};var ba=function(){var L=[],d=function(a){if(document.body)a&&(a(),a=null);else{var b=["load","DOMNodeInserted","DOMContentLoaded"],c=function(){f(b,function(a){B.removeEventListener(a,c,!1)});d(a)};f(b,function(a){B.addEventListener(a,c,!1)})}},Pa=function(c){e(L,function(){b.setTimeout(c,1)});a.domContentLoaded&&N.runListeners()},
N={runListeners:function(){for(var a;a=na(L);)a()},run:function(b){var z=function(){Qa.create(b)};"document-start"==b.script.options.run_at?(c&&r('env: run "'+b.script.name+'" ASAP -> document-start'),z()):"document-body"==b.script.options.run_at?(c&&r('env: schedule "'+b.script.name+'" for document-body'),d(z)):"context-menu"==b.script.options.run_at?(c&&r('env: run "'+b.script.name+'" ASAP -> context-menu'),z()):"document-end"==b.script.options.run_at?(c&&r('env: schedule "'+b.script.name+'" for document-end'),
e(L,z),a.domContentLoaded&&N.runListeners()):(c&&r('env: schedule "'+b.script.name+'" for document-idle'),Pa(z))}};return N}();(l||c)&&r("env: initialized (content, id:"+ta(x,0,10)+"..., "+b.location.origin+b.location.pathname+") ");var W={createUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*qa()|0;return Oa("x"==a?b:b&3|8,16)})},toType:function(a){return ia(Ba(a,{}),new b.RegExp("\\s([a-z|A-Z]+)"))[1]}},X={UTF8:{encode:function(a){return b.unescape(b.encodeURIComponent(a))},
decode:function(a){return b.decodeURIComponent(b.escape(a))}},Base64:{encode:function(a){for(var c="",d=0;d<a.length;d++)c+=sa(va(a,d)&255);return b.btoa(c)},decode:function(a){return b.atob(a)}},str2arrbuf:function(a){for(var c=new b.Uint8Array(a.length),d=0;d<a.length;d++)c[d]=va(a,d);return c.buffer},arrbuf2str:function(a){var c="";a=new b.Uint8Array(a);for(var d=0;d<a.length;d+=32687)c+=m(sa,null,a.subarray(d,d+32687));return c}},T=function(){var a={},b,d=function(b){var c=[],d=[],M=function(){l=
d=c=null;delete a[b]},l={postMessage:function(a){k.send("port.message",{response_id:b,value:a})},onMessage:{addListener:function(a){e(c,a)}},onDisconnect:{addListener:function(a){e(d,a)}},disconnect:function(){k.send("port.message",{response_id:b,disconnect:!0});M()}};a[b]={message:function(a){c&&f(c,function(b){b(a)})},disconnect:function(a){d&&f(d,function(b){b(a)});M()}};return l};return{message:function(e){var t;e.connect?b&&b(e.destination,d(e.response_id)):(t=a[e.response_id])?e.disconnect?
t.disconnect():t.message(e.value):c&&S("ports: unkown id",e.response_id,e)},connect:function(a){var b=W.createUUID();k.send("port.message",{response_id:b,connect:!0,destination:a});return d(b)},onConnect:{addListener:function(a){b=a}}}}(),ma=function(){var a={objs:{},push:function(b,c){0!==c&&1!==c&&(c=0);var d=Da(19831206*qa()+1);a.objs[d]={fn:b,prio:c};return d},remove:function(b){delete a.objs[b]},get:function(b){for(var c=[],d=0;1>=d;d++)f(C(a.objs),function(t){a.objs[t].prio!==d||void 0!==b&&
t!=b||e(c,a.objs[t].fn)});return void 0===b?c:c[0]},finalize:function(b){if(void 0===b){b=a.get();for(var c=0;c<b.length;c++)b[c]()}else return a.objs[b]&&(c=a.objs[b].fn(),delete a.objs[b]),c}};return a}(),Y=function(){var a=function(){var a=0,c={},d={register:function(e,f,k){var m=T.connect("registerMenuCommand");m.onMessage.addListener(function(a){"run"===a&&b.setTimeout(f,1)});m.onDisconnect.addListener(function(){d.unregister(E)});m.postMessage({method:"register",name:e,accessKey:k});l&&w("env: registerMenuCommand "+
J(f));var E=++a;c[E]=m.disconnect;return E},unregister:function(a){l&&w("env: registerMenuCommand "+a);var b;if(b=c[a])b(),delete c[a]}};return d}(),d=function(a,b){var d=null,l=!1,f=null,k,m=function(){var a=[];return{run:function(b){b&&e(a,b);if(d)for(;a.length;)Aa(a)()}}}(),E=T.connect("openInTab");E.onMessage.addListener(function(a){a.tabId?l?O():(d=a.tabId,m.run()):a.name?k=a.name:a.close&&(l=!0,f&&(f(),f=void 0))});E.onDisconnect.addListener(function(){E=null});E.postMessage({method:"openTab",
url:a,options:b});var O=function(){E&&E.postMessage({method:"closeTab"})},A={};Z(A,{close:{value:function(){l?c&&r("env: attempt to close already closed tab!"):(l=!0,O())}},closed:{get:function(){return l}},onclose:{get:function(){return f},set:function(a){f=a}},name:{get:function(){return k},set:function(a){m.run(function(){E&&E.postMessage({method:"nameTab",name:a})})}}});return A},I=function(a,b){var c="Object"===W.toType(a)?a:{url:a,name:b},d=function(a,b){b=b||{};a&&setTimeout(function(){m(a,
b,[b])},1)},e=T.connect("download");e.onMessage.addListener(function(a){try{a.load?c.onload&&d(c.onload,a.data):a.progress?c.onprogress&&d(c.onprogress,a.data):a.timeout?c.ontimeout&&d(c.ontimeout,a.data):c.onerror&&d(c.onerror,a.data)}catch(b){w("env: Error: TM_download - ",b,c)}});e.onDisconnect.addListener(function(){e=null});e.postMessage({details:c});return{abort:function(){e&&e.disconnect();e=null}}},N={};return{log:w,addStyle:function(a,b){var c=W.createUUID();k.send("addStyle",{css:a,id:c},
b?function(){b()}:null);return B.getElementById(c)},closeTab:function(a){k.send("closeTab",null,a?function(){a()}:null)},focusTab:function(a){k.send("focusTab",null,a?function(){a()}:null)},setClipboard:function(a,b,c){k.send("setClipboard",{content:a,info:b,id:x},c?function(){c()}:null)},syntaxCheck:function(a,b){k.send("syntaxCheck",{code:a},function(a){b(a)})},of:function(t){var z=t.script,r=function(){var a=[],d=t.storage,A=0,y=function(a,c){if("string"===typeof a){var d=a[0];a=ta(a,1);switch(d){case "b":return"true"===
a;case "n":return b.Number(a);case "o":try{return da(a)}catch(n){w("values: parseValueFromStorage: "+n)}return c;default:return a}}else return c},P=function(b,d,xa,n){d!=xa&&f(a,function(a){if(a&&a.key==b&&a.cb)try{a.cb(b,y(d),y(xa),n)}catch(A){c&&S('values: change listener of "'+b+'" failed with: '+A.message)}})},q=function(a){g.postMessage({method:"saveStorageKey",uuid:z.uuid,key:a,value:d.data[a],id:x,ts:d.ts})},g=T.connect("values");g.onMessage.addListener(function(a){a.storage&&f(C(a.storage.data),
function(b){var c=d.data[b];d.data[b]=a.storage.data[b];var n=d.data[b];l&&w("values: message - config key "+b+": "+c+" -> "+n);P(b,c,n,!0)});a.removed&&(d[a.removed]=void 0)});g.onDisconnect.addListener(function(){c&&w("values: port disconnected")});g.postMessage({method:"addStorageListener",uuid:z.uuid,id:x});return{set:function(a,b){var c=d.data[a];d.ts=ja();var n=d.data,h;a:{h=b;var A=(typeof h)[0];switch(A){case "o":try{h=A+ha(h)}catch(E){w(E);h=void 0;break a}break;default:h=A+h}}n[a]=h;q(a);
P(a,c,d.data[a],!1)},get:function(a,b){return y(d.data[a],b)},remove:function(a){var b=d.data[a];d.ts=ja();delete d.data[a];q(a);P(a,b,d.data[a],!1)},list:function(){return C(d.data)},registerChangeListener:function(b,c){var d=++A;e(a,{id:d,key:b,cb:c});return d},unregisterChangeListener:function(b){a=U(a,function(a){return a.id!==b?!0:!1})}}}(),B=function(){return{getText:function(a){for(var b=0;b<z.resources.length;b++){var c=z.resources[b];if(c.name==a&&!c.failed){try{if(null!==c.content)return X.UTF8.decode(c.content)}catch(d){}return""}}return null},
getURL:function(a){for(var b=0;b<z.resources.length;b++){var c=z.resources[b];if(c.name==a&&!c.failed){if(null===c.content)return"";try{return"data:"+(c.meta||"application")+";base64,"+X.Base64.encode(c.content)}catch(d){}return c.url}}return null}}}(),H=function(){return{set:function(a,b){k.send("tabsSet",{uuid:z.uuid,tab:a},b?function(){b()}:null)},get:function(a){k.send("tabsGet",{uuid:z.uuid},a?function(b){a(b||{})}:null)},getAll:function(a){k.send("tabsGetAll",{uuid:z.uuid},a?function(b){a(b||
{})}:null)}}}(),J=function(a){var c=!1,d=a.context;delete a.context;var y=function(){var a={};f(C(b.XMLHttpRequest.__proto__),function(b){a[b]=!0});var c=function(){};f(C(b.XMLHttpRequest),function(d){a[d]||(c[d]=b.XMLHttpRequest[d])});return c}(),P=function(){c=!0},q=function(a,d){d=d||{};a&&!c&&b.setTimeout(function(){d.__proto__=y;m(a,d,[d])},1)};"object"===typeof a.url&&a.url.href&&(a.url=a.url.href);var g=function(a,c){var d=new b.FileReader;d.onload=function(){c(X.arrbuf2str(d.result))};Fa(d,
a)},p=function(a,c){var d,G,A,e=W.toType(a);if("Blob"===e||"File"===e)g(a,function(b){c({type:e,value:b,meta:a.type,name:a.name,lastModified:a.lastModified})});else if("FormData"===e)if(G=a.keys&&a.getAll?a.keys():null){var F,u={};for(d=[];!(F=G.next()).done;)d.push(F.value);A=function(){if(d.length){var b=d.pop(),e=a.getAll(b);-1===b.search(/\[\]$/)&&(e=e[0]);p(e,function(a){u[b]=a;A()})}else c({type:"FormData",value:u})};A()}else c({error:e});else if(!(e=W.toType(a))||"Array"!==e&&"Object"!==e)c({value:a});
else{var O,y,P=0;G=0;"Object"===e?(d=C(a),y=function(a){return a<d.length?d[a]:null},O={}):(y=function(b){return b<a.length?b:null},O=[]);A=function(){var d=y(P);null===d?c({type:e,value:O}):p(a[d],function(a){a.error?c(a):(O[d]=a,P++,1024>G++?A():(G=0,b.setTimeout(A,1)))})};A()}},u=!0;(function(b){if(!a.data)return b();p(a.data,function(c){c.error?(u=!1,S("GM_xmlhttpRequest:","unable to handle data type "+c.error+". Going to use default xhr as fallback.")):(a.binary&&(c.type="Blob"),a.data=c,a.data_type=
"typified");b()})})(function(){if(!c)if(u){var g=T.connect("xhr"),n=[];a.headers&&f(C(a.headers),function(b){"cookie"===wa(b)&&(a.cookie=a.headers[b],delete a.headers[b])});g.postMessage({method:"xhr",details:a,callbacks:{onloadstart:!!a.onloadstart,onload:!!a.onload,onreadystatechange:!!a.onreadystatechange,onerror:!0,ontimeout:!!a.ontimeout,onprogress:!!a.onprogress,onpartial:!0},id:x,url:b.location.href,uuid:z.uuid});g.onMessage.addListener(function(c){c.data&&d&&(c.data.context=d);if(c.data&&
c.onload){n.length&&(c.data.response_data=K(n,""),n=null);if(c.data.response_data){var h=c.data.response_data;["response_data"].forEach(function(a){delete c.data[a]});var g={response:function(c){var d=a.responseType?wa(a.responseType):"";return"arraybuffer"==d?X.str2arrbuf(c):"blob"==d?new b.Blob([X.str2arrbuf(c)]):"json"==d?da(c):c},responseText:function(a){return a},responseXML:function(a){var c=new b.DOMParser;return Ga(c,a,"text/xml")}};f(C(g),function(a){ga(c.data,a,function(){try{return g[a](h)}catch(b){S("GM_xmlhttpRequest: ",
b)}})})}q(a.onreadystatechange,c.data);q(a.onload,c.data)}else if(c.onreadystatechange)4!=c.data.readyState&&q(a.onreadystatechange,c.data);else if(c.onpartial)e(n,c.data.partial);else if(c.onerror)c.exception&&ea(c.exception),q(a.onerror,c.data);else{var F=U(["onloadstart","onprogress","ontimeout"],function(a){return!!c[a]})[0]||"onerror";q(a[F],c.data)}});l&&g.onDisconnect.addListener(function(){w("env: TM_xmlhttpRequest.onDisconnect! :)")});P=function(){g&&g.disconnect();g=null;c=!0}}else{var h=
new b.XMLHttpRequest;void 0===a.async&&(a.async=!0);Ha(h,a.method,a.url,a.async,a.user,a.password);a.headers&&f(C(a.headers),function(b){Ia(h,b,a.headers[b])});a.overrideMimeType&&Ja(h,a.overrideMimeType);a.responseType&&(h.responseType=a.responseType);"abort error load loadstart progress readystatechange timeout".split(" ").forEach(function(b){h["on"+b]=function(){var c="",n=a.url;if(2<h.readyState&&(c=Ka(h),4==h.readyState)){c&&(c=V(c,/TM-finalURL[0-9a-zA-Z]*\: .*[\r\n]{1,2}/,""));var e=La(h,"TM-finalURL"+
D.short_id);e&&(n=e)}c={readyState:h.readyState,status:"",statusText:"",responseHeaders:c,finalUrl:n,context:d};4==h.readyState&&(h.responseType?c.response=h.response:(c.responseText=h.responseText,c.responseXML=h.responseXML),c.status=h.status,c.statusText=h.statusText);q(a["on"+b],c)}});Ma(h,a.data);P=function(){Na(h);c=!0}}});return{abort:function(){P()}}},R=function(a,b,c,d,e){var q=null,g={id:x},p=["timeout","text","image","title","highlight"],u=null;"object"===typeof a?u=a:"object"===typeof e&&
(u=e);u?(f(p,function(a){g[a]=u[a]}),q=u.ondone,d=u.onclick,"function"===typeof b&&(q=b)):("number"===typeof e&&(g.timeout=e),g.image=c,g.title=b,g.text=a);g.text&&(g.image=g.image||z.icon64||z.icon,g.title=g.title||z.name);g.text||g.highlight?k.send("notification",g,function(a){d&&a.clicked&&d();q&&q(!0===a.clicked)}):S("GM_notification: neither a message text nor the hightlight options was given!")};N[t.script.uuid]=N[t.script.uuid]||{getInfo:function(){var a=t.script,b={observers:1,id:1,enabled:1,
hash:1,fileURL:1},c={script:{}};f(C(a),function(d){b[d]||(c.script[d]=a[d])});var d=a.options.updateURL||a.options.fileURL;c.script["run-at"]=a.options.override.run_at||a.options.run_at;c.script.excludes=a.options.override.orig_excludes;c.script.includes=a.options.override.orig_includes;c.script.matches=a.options.override.orig_matches;c.script.grant=a.grant;c.script.unwrap=!1;c.scriptMetaStr=t.header;c.scriptSource=t.code;c.scriptWillUpdate=!!d;c.scriptUpdateURL=d;c.version=D.version;c.scriptHandler=
"Tampermonkey";c.isIncognito=D.inIncognitoContext;c.downloadMode=D.downloadMode;return c}(),registerMenuCommand:a.register,unregisterMenuCommand:a.unregister,download:I,openInTab:d,setValue:r.set,getValue:r.get,deleteValue:r.remove,listValues:r.list,addValueChangeListener:r.registerChangeListener,removeValueChangeListener:r.unregisterChangeListener,getResourceText:B.getText,getResourceURL:B.getURL,notification:R,xmlhttpRequest:J,setTab:H.set,getTab:H.get,getTabs:H.getAll};return N[t.script.uuid]}}}(),
Qa=function(){var L=function(a,b,c){for(var d in b){var e=oa(b,d);e&&e.get&&!D.sandbox_allow_getters||("function"===typeof b[d]?a[d]=R(b[d],b):function(){var c=d;ga(a,c,function(){return b[c]})}())}f(C(c),function(b){a[b]=c[b]});return a},x=function(a,c,d,e){var q={attrChange:0,attrName:null,bubbles:!0,cancelBubble:!1,cancelable:!1,clipboardData:void 0,currentTarget:null,defaultPrevented:!1,eventPhase:0,newValue:null,prevValue:null,relatedNode:null,returnValue:!0,srcElement:null,target:null,timeStamp:ja()};
d="string"===typeof d?new b.Function(d):d;var g=new Event;f(C(q),function(a){g[a]=q[a]});f(C(c),function(a){g[a]=c[a]});g.type=a;m(d,e,[g])},B=function(a,b,c){void 0===c&&(c=function(a){return a});var d={GM_info:!0};f(a,function(a){d[a]=!0});return U(b,function(a){return d[c(a.name)]})},N=function(a,b){void 0===b&&(b=100);return b&&a&&(a==document||N(a.parentNode,b-1))},t=function(){var b=null;return function(c){b||(b={instance:c,is_open:!1},f(["write","writeln","open","close"],function(d){b[d]=c[d];
c[d]=function(){var e=!1;-1!=["write","writeln","open"].indexOf(d)?b.is_open?e=!0:b.is_open=!0:"close"===d&&(b.is_open=!1);!e&&b.is_open&&k.send("document.write");var l=document.documentElement,g=m(b[d],c,arguments);if(!e&&b.is_open)return l!==document.documentElement&&(b.instance!==c&&(b=null,t(document)),f(a.write_listeners,function(a){a(document)})),g}}))}}(),z={},M=[],T=function(f,A,k,m){if(!f.__addEventListener){Z(f,{__addEventListener:{value:f.addEventListener,enumerable:!1,configurable:!1},
__removeEventListener:{value:f.removeEventListener,enumerable:!1,configurable:!1}});var q=[],g=function(a){for(var b=0;b<q.length;b++)if(q[b].fn===a)return b};f.removeEventListener=function(a,b,c){c=!!c;var d,e;if(void 0!==(d=g(b))&&(e=q[d].listeners)){if(b=e[a+"-"+c])this.__removeEventListener(a,b,c),delete e[a+"-"+c];za(e).length||H(q,d,1)}else this.__removeEventListener(a,b,c)};var p=function(a,c,d,h){if(c){var g=M.length;c=b.parseInt(K(["DOMContentLoaded"==d?1:2,h?1:2,h?c:3-c,ja()],"0"));for(d=
0;d<M.length;d++)if(h=M[d],!h||!h.prio||h.prio>c){g=d;break}H(M,g,0,{prio:c,fn:a})}else e(M,{fn:a})};f.addEventListener=function(u,f,n){(l||I)&&w("env: addEventListener "+u);if("load"==u||"DOMContentLoaded"==u||"DOMNodeInserted"==u){n=!!n;var h=!0,G=this;if(!m)try{try{throw new b.Error;}catch(ka){var O=/tms_[0-9a-f_]+/,Q=ka.stack||ka.stacktrace;if(Q)for(var F=ua(Q,"\n"),ya,Q=0;Q<F.length&&(!(ya=ia(F[Q],O))||!(m=z[ya[0]]));Q++);else{var v=function(a,d){void 0===d&&(d=10);if(0===d)return null;if(a.caller){var e,
h;try{return h=J(a.caller),ia(h,new b.RegExp("^function[^(]+"))&&(void 0).length&&(e=ia((void 0)[0],O))?e[0]:v(a.caller,d-1)}catch(n){c&&S("env: unable to detect caller context",n)}}return null},r;if(r=v(arguments.callee))m=z[r]}}}catch(ka){c&&ea("env: Error: event "+u,ka)}m&&"document-idle"!==m.run_at&&(F=null,"load"==u?a.pageLoaded&&(F=function(){var a=G.document||G;(l||I)&&w("env: postLoadEvent!");a=a||document;x("load",{attrName:"null",newValue:"null",prevValue:"null",eventPhase:b.Event.AT_TARGET,
attrChange:b.MutationEvent.ADDITION,target:a,relatedNode:a,srcElement:a},f,G)},h=!1,p(F,A,u,n)):"DOMContentLoaded"==u&&a.domContentLoaded&&(F=function(){var a=G.document||G;(l||I)&&w("env: postDomEventListener!");a=a||document;x("DOMContentLoaded",{attrName:"null",newValue:"null",prevValue:"null",eventPhase:b.Event.AT_TARGET,attrChange:b.MutationEvent.ADDITION,target:a,relatedNode:a,srcElement:a},f,G)},h=!1,p(F,A,u,n)),F&&(b.setTimeout(function(){if(M.length){var a=na(M);a&&a.fn&&a.fn()}},1),h=!1));
h&&(F=function(a){return d(f,this,k(a))},void 0===(h=g(f))&&(h=q.length,e(q,{fn:f,listeners:{}})),q[h].listeners[u+"-"+n]=F,this.__addEventListener(u,F,n))}else this.__addEventListener(u,f,n)};ma.push(function(){f.removeEventListener=f.__removeEventListener;f.addEventListener=f.__addEventListener})}},X=function(a){a.__evaluate||(Z(a,{__evaluate:{value:a.evaluate,enumerable:!1,configurable:!1}}),a.evaluate=function(a,b,c,d,e){l&&w("env: document.evaluate "+a);b||(b=this);var p;if("undefined"!=typeof XPathResult){var f=
a,k=null;try{p=this.__evaluate(f,b,c,d,e)}catch(h){k=h}var n=!1;try{n|=!!p.snapshotLength}catch(h){}try{n|=!!p.singleNodeValue}catch(h){}if(n||"."==a[0]||N(b))l&&w("env: queried document for "+f);else{l&&w("env: query added elem for "+f);f=("/"==a[0]?".":"./")+a;try{p=this.__evaluate(f,b,c,d,e)}catch(h){}}l&&w("env: query returned ",p,k);if(!n&&k)throw k;}else l&&w("env: XPathResult == undefined, but selectNodes via ",a),p=b.selectNodes(a);return p},ma.push(function(){a.evaluate=a.__evaluate}))},
ba=function(c,d){var e=["eval"],k={};f(c,function(a){a.context_prop&&(k[(a.name.split(".")||[])[1]]=!0)});var q=function(a,b,c,d){var h=function(c){return c===b?a:c},g=function(a,b,c,d){c||(c=a);var e=function(){var e=m(a[b],c,arguments);d&&(e=d(e));return e};e.__proto__=a[b];e.prototype=a[b].prototype;return e},A=function(c){var d,e,h=null,h=function(h){d=h;e=function(){return m(h,a,arguments)};b[c]=e};ga(a,c,function(){return void 0===d||e!==b[c]?b[c]:d});pa(a,c,h)},q=function(c,d){var e,g=null,
n=null,g="function"===typeof d.get?d.get:function(){d.opts&&d.opts.get_cb&&m(d.opts.get_cb,this,[arguments,q]);return void 0===e?h(b[c]):e};"function"===typeof d.set?n=d.set:d.get||(n=function(a){e=a});g&&ga(a,c,g);n&&pa(a,c,n)};f(C(d),function(a){c[a]=c[a]||!1!==d[a]});f(C(c),function(f){if(!1!==d[f]){var m,v={};try{var t=oa(b,f);try{if(!(m=d[f])||m.needs_grant&&!0!==k[f])if(t&&t.get)if(D.sandbox_allow_getters)v.get=!0;else{l&&r("sandbox: ignore getter",f,t);return}else"function"===typeof b[f]?c[f].proto?
v.wrap=!0:b[f].prototype&&!t.enumerable||-1!=fa(e,f)||!b[f].bind?v.direct=!0:v.bind=!0:"number"===typeof b[f]||"string"===typeof b[f]?v.get=!0:c[f].event?v.event=!0:v.direct=!0;else if(m.wrap)v.wrap=!0,v.that=m.that;else if(m.direct)v.direct=!0;else if(m.enhance)v.enhance=m.enhance;else if(m.get||m.set)v.get=m.get,v.set=m.set,v.opts=m.opts}catch(w){v.get=!0}v.enhance?(l&&r("sandbox: original["+f+"] -> enhanced reference"),a[f]=v.enhance):t&&t.get&&!D.sandbox_allow_getters?l&&r("sandbox: ignore getter",
f,t):v.event?(l&&r("sandbox: original["+f+"] -> event reference"),A(f)):v.get||v.set?(l&&r("sandbox: original["+f+"] -> "+("function"===typeof v.get||"function"===typeof v.set?"enhanced ":"")+"getter/setter reference"),q(f,v)):v.wrap?(l&&r("sandbox: original["+f+"] -> wrapped reference "),a[f]=g(b,f,v.that,h)):v.direct?(l&&r("sandbox: original["+f+"] -> direct reference"),a[f]=h(b[f])):v.bind&&(l&&r("sandbox: original["+f+"] -> bound reference"),a[f]=R(b[f],b))}catch(w){S("env: error while creating a new sandbox: "+
w.message)}}});return a},g=function(a,c,d,e,h){var f=c[d];e&&"string"===typeof f?c[d]=new b.Function(f):h&&(c[d]=function(){return m(f,h,arguments)});return m(a,window,c)};return function(){var c=new Window,e={setTimeout:{enhance:function(){return g(b.setTimeout,arguments,0,!0,c)}},setInterval:{enhance:function(){return g(b.setInterval,arguments,0,!0,c)}},close:{needs_grant:!0,get:function(){return b.self==b.top?function(a){return Y.closeTab(a)}:b.close}},focus:{needs_grant:!0,get:function(){return function(a){return Y.focusTab(a)}}},
location:{get:!0,set:function(a){b.location.href=a}},document:{get:function(){var a=b.document;d(a);return a}},clearInterval:{get:function(){return b.clearInterval}},clearTimeout:{get:function(){return b.clearTimeout}},addEventListener:{enhance:function(){return g(b.addEventListener,arguments,1,!0)}},removeEventListener:{enhance:function(){return g(b.removeEventListener,arguments,1,!0)}}};(function(){var a=ra(b.frames.length,7);e.length={get:!0,opts:{get_cb:function(c,d){for(var e=b.frames.length,
f=a;f<e;f++)d(b.String(f),{get:!0});a=ra(e,a)}}};for(var c=0;c<a;c++)e[b.String(c)]={get:!0}})();f(C(b),function(a){b[a]!=window&&(e[a]=e[a]||{enhance:b[a]})});var k=q(c,window,a.windowProps,e),n={context:k,filter:function(a){return a==window?k:a},filterEvent:function(a){var b={},c;for(c in a)if("function"===typeof a[c])b[c]=function(){var b=c;return function(){return m(a[b],a,arguments)}}();else{var d=n.filter(a[c]);b[c]=d}return b}};return n}()},da=function(){return L({},b.console,{debug:r,log:w,
info:Ca,warn:S,error:ea})},E=function(d,k,l,t,q,g){var p=null,u=function(){return"[Tampermonkey property]"};try{var r=t.sandboxes[d.uuid],n=["context","fapply"],h=[void 0,void 0];f(t.elements[d.uuid],function(a){a.name?(a.overwrite?(e(n,a.name),e(h,a.value)):a.context_prop||(r[a.name]=a.value,e(n,a.name),e(h,"context."+a.name)),a.protect&&r[a.name]&&(r[a.name].toString=u)):c&&S("env: WARN: unexpected item in props elem: "+ha(a))});var G,p=['(function(context, fapply, console) {with (context) {(function(module) {"use strict";try {\n',
D.measure_scripts?'console.time("'+(G="SCRIPT RUN TIME["+d.name.replace(/\W+/g," ")+"]")+'");\n':"","fapply(module, context, [",K(h,","),"]);",D.measure_scripts?'console.timeEnd("'+G+'");\n':"","} catch (e) {if (e.message && e.stack) {console.error(\"ERROR: Execution of script '",V(d.name,new b.RegExp("[\"']","g"),"\\$1"),'\' failed! " + e.message);console.log(e.stack.replace(/(\\\\(eval at )?<anonymous>[: ]?)|([\\s.]*at Object.tms_[\\s\\S.]*)/g, ""));} else {console.error(e);}}\n})(function ',g,
"(",K(n,","),") {",D.enforce_strict_mode?'"use strict";\n':"",l,k,"\n})}})(this.context, this.fapply, this.console)"].join(""),w={context:r,fapply:m,console:da()};q?q(p,w):a.E_c(p,w)}catch(Q){Y.syntaxCheck(K([l,k],""),function(a){var e="";if(a.errors){var h=ua(l,"\n").length-1,g="";a.errors&&f(C(a.errors),function(b){if((b=a.errors[b])&&0<=b.line&&b.reason){var c=b.line;g+=K([c>h?"script:":"require:"," (",b.code,") ",V(b.reason,/.$/,"")," on line: ",c>h?c-h:c," at character: ",b.character,"\n"],"")}});
e="JSHINT output:\n"+g}else e=k;var n=Q.stack?V(Q.stack,/(\\(eval at )?<anonymous>[: ]?)|([\s.]*at Object.tms_[\s\S.]*)/g,""):"";c||a.errors?ea('Syntax error @ "'+d.name+'"!\n##########################\n'+e+"##########################\n\n"+n):ea('Syntax error @ "'+d.name+'"!\n\n',n);b.setTimeout(function(){throw Q;},1)})}};return{create:function(d){var k=d.script,y=[],x=-1!==k.grant.indexOf("none")?function(b,c){a.E_u(b,c)}:null,q=k.namespace+"_"+!!x;void 0===a.props[q]&&(a.props[q]={sandboxes:{},
elements:{}},ma.push(function(){a.props[q]=null}));e(y,{name:"CDATA",value:function(a){this.src=a;this.toXMLString=this.toString=function(){return this.src}}});e(y,{name:"uneval",value:function(a){try{return"\\$1 = "+ha(a)+";"}catch(b){w(b)}}});e(y,{name:"define",value:void 0});e(y,{name:"module",value:void 0});var g=[],p=Y.of(d);if(!x){e(y,{name:"window",value:"context",overwrite:!0});var u={window:window};f(C(u),function(a){var b=V(a,/^(.)/g,function(a){return Ea(a)});e(y,{name:"unsafe"+b,value:u[a]})});
e(y,{name:"console",value:da()});e(y,{name:"cloneInto",value:function(a){return a}});e(y,{name:"exportFunction",value:function(a,b,c){c&&void 0!==c.defineAs&&(b[c.defineAs]=a);return a}});e(y,{name:"createObjectIn",value:function(a,b){var c={};b&&void 0!==b.defineAs&&(a[b.defineAs]=c);return c}});e(g,{name:"GM_addStyle",value:Y.addStyle});e(g,{name:"GM_deleteValue",value:p.deleteValue});e(g,{name:"GM_listValues",value:p.listValues});e(g,{name:"GM_getValue",value:p.getValue});e(g,{name:"GM_setValue",
value:p.setValue});e(g,{name:"GM_log",value:Y.log});e(g,{name:"GM_registerMenuCommand",value:p.registerMenuCommand});e(g,{name:"GM_unregisterMenuCommand",value:p.unregisterMenuCommand});e(g,{name:"GM_openInTab",value:p.openInTab});e(g,{name:"GM_addValueChangeListener",value:p.addValueChangeListener});e(g,{name:"GM_removeValueChangeListener",value:p.removeValueChangeListener});e(g,{name:"GM_xmlhttpRequest",value:p.xmlhttpRequest});e(g,{name:"GM_download",value:p.download});e(g,{name:"GM_setClipboard",
value:Y.setClipboard});e(g,{name:"GM_getTab",value:p.getTab});e(g,{name:"GM_setTab",value:p.setTab});e(g,{name:"GM_saveTab",value:p.setTab});e(g,{name:"GM_getTabs",value:p.getTabs});e(g,{name:"GM_notification",value:p.notification});e(g,{name:"GM_getResourceText",value:p.getResourceText});e(g,{name:"GM_getResourceURL",value:p.getResourceURL});e(g,{name:"window.close",context_prop:!0});e(g,{name:"window.focus",context_prop:!0})}e(g,{name:"GM_info",value:p.getInfo});y=aa(y,B(k.grant,ca(g,function(a){a.protect=
!0;return a})));k.options.compat_prototypes&&((l||c)&&w("env: option: add toSource"),b.Object.prototype.toSource||Z(b.Object.prototype,{toSource:{value:function(){var a=W.toType(this);if("String"===a)return'(String("'+V(this,new b.RegExp('"',"g"),'\\"')+'"))';if("Number"===a)return'(Number("'+b.Number(this)+'"))';if("Array"===a){for(var a="(new Array(",c=0;c<this.length;c++){var d=W.toType(this[c]),a="Null"===d?a+"null":"Undefined"===d?a+"undefined":a+this[c].toSource();c+1<this.length&&(a+=",")}return a+
"))"}return'JSON.parse(unescape("'+b.escape(ha(this))+'"))'},enumerable:!1,writable:!0,configurable:!0}}),(l||c)&&w("env: option: add some array generics"),f("indexOf lastIndexOf filter forEach every map some slice".split(" "),function(a){if("function"!==typeof b.Array[a]){var c={};c[a]={value:function(c){return m(b.Array.prototype[a],c,m(la.wrappedJSObject,arguments,[1]))},enumerable:!1,writable:!0,configurable:!0};Z(b.Array,c)}}));g="";if(x)p=new Window;else{var L=ba(y,function(a){X(a);t(a);T(a,
2,L.filterEvent)}),p={run_at:k.options.run_at,uuid:k.uuid},g="tms_"+V(k.uuid,/-/g,"_");z[g]=p;T(L.context,1,L.filterEvent,p);p=L.context}a.props[q].sandboxes[k.uuid]=p;a.props[q].elements[k.uuid]=y;(l||c)&&r("env: execute script "+k.name+" @ the "+(x?"un":"")+"safe context now!");E(k,d.code,d.requires,a.props[q],x,g)}}}();(function(){if(D.external_connect){var a;if(a=window.external){var b=function(a,b){k.send("external.message",a,function(a){b&&b(a)})};Z(a,{Tampermonkey:{get:function(){return{getVersion:function(a){b({method:"getVersion"},
a)},isInstalled:function(a,c,d){"function"===typeof c&&(d=c,c=null);b({method:"isInstalled",script:{name:a,namespace:c}},d)}}},configurable:!0}})}}})();k.onMessage.setListener(function(a){var b=a.a;"load"==a.m?ba.runListeners():"DOMContentLoaded"==a.m?ba.runListeners():"setForeignAttr"==a.m?window[b.attr]=b.value:"port.message"==a.m?T.message(b):"executeScript"==a.m?ba.run(a.a):"cleanup"==a.m?k.cleanup():c&&w("env: unkown method",a)});c&&w("Tampermonkey started");a.scripts.forEach(function(a){ba.run(a)})}});
