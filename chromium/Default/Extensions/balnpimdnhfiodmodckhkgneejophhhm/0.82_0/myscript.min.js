function extStateListener(){$(".js-switch").change(function(){var e=$(this).parents(".switch").attr("id"),t=$(this).parents(".switch").attr("name");$(this).is(":checked")?chrome.management.setEnabled(e,!0,function(){Materialize.toast(t+" is now on",2e3,"ccToastOn")}):chrome.management.setEnabled(e,!1,function(){Materialize.toast(t+" is now off",2e3,"ccToastOff")})})}function addExtensions(e){$("#addExts").openModal({ready:function(){checkboxlistener(e)},complete:function(){$("#addExts h4").text(t),$("#extList").html(""),submitThatShit()}});var t=$("#addExts h4").text();$("#addExts h4").text(t+e),extArray.forEach(function(e){$("#extList").append(extListTemplate(e))})}function checkboxlistener(){$(".extList-toggle input").change(function(){var e=$(this).attr("appid");idList.push(e)})}function submitThatShit(){tempObj={},tempObj[name]=idList,chrome.storage.sync.set(tempObj,function(){console.log("Saved",name,idList),chrome.storage.sync.get(function(e){1===Object.keys(e).length&&($("#noProfilesText").hide(),$("#profileHeader").css("background-color","#f3f3f3"),$("#editBtn").show(),$("#addProfileBox").show());var t="<a class='profile-btn off' id='"+name.split(" ").join("_")+"'>"+name+"</a>";$(".profile-holder").append(t),$("#name").val("")}),tooltipGenerator(),setTimeout(function(){$(".tooltipped").tooltip()},1e3)})}function getProfiles(){chrome.storage.sync.get(function(e){if(0===Object.keys(e).length)return $("#noProfilesText").show(),$("#profileHeader").css("background-color","#03A9FA"),void $("#editBtn").hide();Object.keys(e).length>=1&&Object.keys(e).length<=4&&$("#addProfileBox").show(),$("#noProfilesText").hide(),$("#profileHeader").css("background-color","#f3f3f3"),$("#editBtn").show();for(var t=Object.keys(e),o=0;o<t.length;o++){var n=t[o],a="<a class='profile-btn off' id='"+n.toLowerCase().split(" ").join("_")+"'>"+n+"</a>";$(".profile-holder").append(a)}})}var extArray=[],activeExtensions=[],inactiveExtensions=[],btnId,idList=[],source=$("#entry-template").html(),template=Handlebars.compile(source),extListSource=$("#extList-template").html(),extListTemplate=Handlebars.compile(extListSource);$(document).ready(function(){getProfiles(),$(".modal-trigger").leanModal(),$("#removeAllBtn, #addProfileBox").hide(),chrome.management.getAll(function(e){e.forEach(function(e){"extension"===e.type&&extArray.push(e)}),extArray.sort(function(e,t){return e.name.localeCompare(t.name)}),extArray.forEach(function(e){imgsrc=void 0===e.icons?"icon-128.png":e.icons[e.icons.length-1].url,e.pic=imgsrc;var t=e.enabled;t=t===!0?"checked":"",e.stringEnabled=t,e.enabled?$("#activeExtensions").append(template(e)):$("#inactiveExtensions").append(template(e))}),extStateListener(),chrome.storage.sync.get(function(e){for(var t=Object.keys(e).length,o=0;t>o;o++)for(key in e){$("#"+key).addClass("on").removeClass("off");for(var o=0;o<e[key].length;o++)for(var n=0;n<extArray.length;n++)extArray[n].id===e[key][o]&&extArray[n].enabled===!1&&$("#"+key).removeClass("on").addClass("off")}}),$(".extId").hide(),$(".extState").hide()}),$("#searchbox").keyup(function(){var e=$(this).val();$(".extName").each(function(){var t=$(this).parents(".extBlock");$(this).text().search(new RegExp(e,"i"))<0?t.fadeOut():t.fadeIn()})}),$(".searchbox").focus(),tooltipGenerator(),setTimeout(function(){$(".tooltipped").tooltip()},1e3)}),$("body").on("click",".profile-btn",function(){btnId=$(this).attr("id"),btnIdConvert=btnId.split("_").join(" "),$(this).hasClass("on")?(chrome.storage.sync.get(function(e){Object.keys(e).forEach(function(t){if(t===btnIdConvert)for(var o=0;o<e[btnIdConvert].length;o++)chrome.management.setEnabled(e[btnIdConvert][o],!1,function(){});Materialize.toast(btnIdConvert+" is now off",2e3,"ccToastOff")})}),$(this).removeClass("on").addClass("off"),setTimeout(function(){location.reload(!1)},1e3)):$(this).hasClass("off")&&(chrome.storage.sync.get(function(e){Object.keys(e).forEach(function(t){if(t===btnIdConvert)for(var o=0;o<e[btnIdConvert].length;o++)chrome.management.setEnabled(e[btnIdConvert][o],!0,function(){});Materialize.toast(btnIdConvert+" is now on",2e3,"ccToastOn")})}),$(this).removeClass("off").addClass("on"),setTimeout(function(){location.reload(!1)},1e3))}),$("#addProfile").click(function(){$("#profilePrompt").openModal()}),$("#nameSubmit").submit(function(e){e.preventDefault(),name=$("#name").val().toLowerCase(),chrome.storage.sync.get(function(e){return-1!=$.inArray(name,Object.keys(e))?void Materialize.toast("Profile name already exists!",2e3,"alert"):($("#profilePrompt").closeModal(),void setTimeout(function(){addExtensions(name)},500))})}),$("body").on("click","#addProfileBox",function(){$("#profilePrompt").openModal()}),$("body").on("click","#editBtn",function(){$("#removeAllBtn").show()}),$("body").on("click","#removeAllBtn",function(){chrome.storage.sync.clear(),Materialize.toast("Deleting your profiles...",2e3,"deleteAll"),setTimeout(function(){location.reload(!1)},1e3)});var tooltipGenerator=function(){var e=[];chrome.storage.sync.get(function(t){Object.keys(t).forEach(function(o){for(var n=0;n<t[o].length;n++)for(var a=t[o][n],n=0;n<extArray.length;n++)if(extArray[n].id===a){e.push(extArray[n].shortName);break}var i=o.split(" ").join("_");$("#"+i).attr("data-tooltip",e).attr("data-position","bottom").attr("delay",50).addClass("tooltipped"),e=[]})})};