chrome.storage.local.get("version",function(a){3!==a.version&&(chrome.tabs.create({url:"/installed.html"}),chrome.storage.local.get("styles",function(a){a&&a.styles&&(a.styles.domain_styles&&Object.keys(a.styles.domain_styles).forEach(function(b){a.styles.domain_styles[b].font_family&&(a.styles.domain_styles[b].font_family.name=a.styles.domain_styles[b].font_family.font_family,delete a.styles.domain_styles[b].font_family.font_family,a.styles.domain_styles[b].font_family.type=a.styles.domain_styles[b].font_family.is_google?"google":"standard",delete a.styles.domain_styles[b].font_family.is_google)}),a.styles.global_style&&a.styles.global_style.font_family&&(a.styles.global_style.font_family.name=a.styles.global_style.font_family.font_family,delete a.styles.global_style.font_family.font_family,a.styles.global_style.font_family.type=a.styles.global_style.font_family.is_google?"google":"standard",delete a.styles.global_style.font_family.is_google),chrome.storage.local.set(a))}),chrome.storage.local.set({version:3}))}),chrome.storage.local.get("installed",function(a){a.installed||(chrome.tabs.query({},function(a){for(var b in a)chrome.tabs.executeScript(a[b].id,{file:"cs.js"})}),chrome.storage.local.set({installed:!0}))});